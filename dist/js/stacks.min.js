!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Stimulus={})}(this,function(e){"use strict";var r=function(){function e(e,t){this.eventTarget=e,this.eventName=t,this.unorderedBindings=new Set}return e.prototype.connect=function(){this.eventTarget.addEventListener(this.eventName,this,!1)},e.prototype.disconnect=function(){this.eventTarget.removeEventListener(this.eventName,this,!1)},e.prototype.bindingConnected=function(e){this.unorderedBindings.add(e)},e.prototype.bindingDisconnected=function(e){this.unorderedBindings.delete(e)},e.prototype.handleEvent=function(e){for(var t=function(e){{if("immediatePropagationStopped"in e)return e;var t=e.stopImmediatePropagation;return Object.assign(e,{immediatePropagationStopped:!1,stopImmediatePropagation:function(){this.immediatePropagationStopped=!0,t.call(this)}})}}(e),n=0,r=this.bindings;n<r.length;n++){var o=r[n];if(t.immediatePropagationStopped)break;o.handleEvent(t)}},Object.defineProperty(e.prototype,"bindings",{get:function(){return Array.from(this.unorderedBindings).sort(function(e,t){var n=e.index,r=t.index;return n<r?-1:r<n?1:0})},enumerable:!0,configurable:!0}),e}();var n=function(){function e(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}return e.prototype.start=function(){this.started||(this.started=!0,this.eventListeners.forEach(function(e){return e.connect()}))},e.prototype.stop=function(){this.started&&(this.started=!1,this.eventListeners.forEach(function(e){return e.disconnect()}))},Object.defineProperty(e.prototype,"eventListeners",{get:function(){return Array.from(this.eventListenerMaps.values()).reduce(function(e,t){return e.concat(Array.from(t.values()))},[])},enumerable:!0,configurable:!0}),e.prototype.bindingConnected=function(e){this.fetchEventListenerForBinding(e).bindingConnected(e)},e.prototype.bindingDisconnected=function(e){this.fetchEventListenerForBinding(e).bindingDisconnected(e)},e.prototype.handleError=function(e,t,n){void 0===n&&(n={}),this.application.handleError(e,"Error "+t,n)},e.prototype.fetchEventListenerForBinding=function(e){var t=e.eventTarget,n=e.eventName;return this.fetchEventListener(t,n)},e.prototype.fetchEventListener=function(e,t){var n=this.fetchEventListenerMapForEventTarget(e),r=n.get(t);return r||(r=this.createEventListener(e,t),n.set(t,r)),r},e.prototype.createEventListener=function(e,t){var n=new r(e,t);return this.started&&n.connect(),n},e.prototype.fetchEventListenerMapForEventTarget=function(e){var t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t},e}(),o=/^((.+?)(@(window|document))?->)?(.+?)(#(.+))?$/;function t(e){var t=e.trim().match(o)||[];return{eventTarget:function(e){{if("window"==e)return window;if("document"==e)return document}}(t[4]),eventName:t[2],identifier:t[5],methodName:t[7]}}var i=function(){function e(e,t,n){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||function(e){var t=e.tagName.toLowerCase();if(t in s)return s[t](e)}(e)||a("missing event name"),this.identifier=n.identifier||a("missing identifier"),this.methodName=n.methodName||a("missing method name")}return e.forToken=function(e){return new this(e.element,e.index,t(e.content))},e.prototype.toString=function(){var e=this.eventTargetName?"@"+this.eventTargetName:"";return""+this.eventName+e+"->"+this.identifier+"#"+this.methodName},Object.defineProperty(e.prototype,"eventTargetName",{get:function(){return(e=this.eventTarget)==window?"window":e==document?"document":void 0;var e},enumerable:!0,configurable:!0}),e}(),s={a:function(e){return"click"},button:function(e){return"click"},form:function(e){return"submit"},input:function(e){return"submit"==e.getAttribute("type")?"click":"change"},select:function(e){return"change"},textarea:function(e){return"change"}};function a(e){throw new Error(e)}var c=function(){function e(e,t){this.context=e,this.action=t}return Object.defineProperty(e.prototype,"index",{get:function(){return this.action.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventTarget",{get:function(){return this.action.eventTarget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(e){this.willBeInvokedByEvent(e)&&this.invokeWithEvent(e)},Object.defineProperty(e.prototype,"eventName",{get:function(){return this.action.eventName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){var e=this.controller[this.methodName];if("function"==typeof e)return e;throw new Error('Action "'+this.action+'" references undefined method "'+this.methodName+'"')},enumerable:!0,configurable:!0}),e.prototype.invokeWithEvent=function(t){try{this.method.call(this.controller,t)}catch(e){var n=this,r={identifier:n.identifier,controller:n.controller,element:n.element,index:n.index,event:t};this.context.handleError(e,'invoking action "'+this.action+'"',r)}},e.prototype.willBeInvokedByEvent=function(e){var t=e.target;return this.element===t||(!(t instanceof Element&&this.element.contains(t))||this.scope.containsElement(t))},Object.defineProperty(e.prototype,"controller",{get:function(){return this.context.controller},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"methodName",{get:function(){return this.action.methodName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this.context.scope},enumerable:!0,configurable:!0}),e}(),u=function(){function e(e,t){var n=this;this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(function(e){return n.processMutations(e)})}return e.prototype.start=function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,childList:!0,subtree:!0}),this.refresh())},e.prototype.stop=function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)},e.prototype.refresh=function(){if(this.started){for(var e=new Set(this.matchElementsInTree()),t=0,n=Array.from(this.elements);t<n.length;t++){var r=n[t];e.has(r)||this.removeElement(r)}for(var o=0,i=Array.from(e);o<i.length;o++){r=i[o];this.addElement(r)}}},e.prototype.processMutations=function(e){if(this.started)for(var t=0,n=e;t<n.length;t++){var r=n[t];this.processMutation(r)}},e.prototype.processMutation=function(e){"attributes"==e.type?this.processAttributeChange(e.target,e.attributeName):"childList"==e.type&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))},e.prototype.processAttributeChange=function(e,t){var n=e;this.elements.has(n)?this.delegate.elementAttributeChanged&&this.matchElement(n)?this.delegate.elementAttributeChanged(n,t):this.removeElement(n):this.matchElement(n)&&this.addElement(n)},e.prototype.processRemovedNodes=function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t],o=this.elementFromNode(r);o&&this.processTree(o,this.removeElement)}},e.prototype.processAddedNodes=function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t],o=this.elementFromNode(r);o&&this.elementIsActive(o)&&this.processTree(o,this.addElement)}},e.prototype.matchElement=function(e){return this.delegate.matchElement(e)},e.prototype.matchElementsInTree=function(e){return void 0===e&&(e=this.element),this.delegate.matchElementsInTree(e)},e.prototype.processTree=function(e,t){for(var n=0,r=this.matchElementsInTree(e);n<r.length;n++){var o=r[n];t.call(this,o)}},e.prototype.elementFromNode=function(e){if(e.nodeType==Node.ELEMENT_NODE)return e},e.prototype.elementIsActive=function(e){return e.isConnected==this.element.isConnected&&this.element.contains(e)},e.prototype.addElement=function(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))},e.prototype.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))},e}(),l=function(){function e(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new u(e,this)}return Object.defineProperty(e.prototype,"element",{get:function(){return this.elementObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selector",{get:function(){return"["+this.attributeName+"]"},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.elementObserver.start()},e.prototype.stop=function(){this.elementObserver.stop()},e.prototype.refresh=function(){this.elementObserver.refresh()},Object.defineProperty(e.prototype,"started",{get:function(){return this.elementObserver.started},enumerable:!0,configurable:!0}),e.prototype.matchElement=function(e){return e.hasAttribute(this.attributeName)},e.prototype.matchElementsInTree=function(e){var t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)},e.prototype.elementMatched=function(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)},e.prototype.elementUnmatched=function(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)},e.prototype.elementAttributeChanged=function(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)},e}();function p(e,t,n){h(e,t).add(n)}function f(e,t,n){var r,o,i;h(e,t).delete(n),o=t,null!=(i=(r=e).get(o))&&0==i.size&&r.delete(o)}function h(e,t){var n=e.get(t);return n||(n=new Set,e.set(t,n)),n}var d,m=function(){function e(){this.valuesByKey=new Map}return Object.defineProperty(e.prototype,"values",{get:function(){return Array.from(this.valuesByKey.values()).reduce(function(e,t){return e.concat(Array.from(t))},[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return Array.from(this.valuesByKey.values()).reduce(function(e,t){return e+t.size},0)},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){p(this.valuesByKey,e,t)},e.prototype.delete=function(e,t){f(this.valuesByKey,e,t)},e.prototype.has=function(e,t){var n=this.valuesByKey.get(e);return null!=n&&n.has(t)},e.prototype.hasKey=function(e){return this.valuesByKey.has(e)},e.prototype.hasValue=function(t){return Array.from(this.valuesByKey.values()).some(function(e){return e.has(t)})},e.prototype.getValuesForKey=function(e){var t=this.valuesByKey.get(e);return t?Array.from(t):[]},e.prototype.getKeysForValue=function(t){return Array.from(this.valuesByKey).filter(function(e){e[0];return e[1].has(t)}).map(function(e){var t=e[0];e[1];return t})},e}(),y=(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g=(function(n){function e(){var e=n.call(this)||this;return e.keysByValue=new Map,e}y(e,n),Object.defineProperty(e.prototype,"values",{get:function(){return Array.from(this.keysByValue.keys())},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){n.prototype.add.call(this,e,t),p(this.keysByValue,t,e)},e.prototype.delete=function(e,t){n.prototype.delete.call(this,e,t),f(this.keysByValue,t,e)},e.prototype.hasValue=function(e){return this.keysByValue.has(e)},e.prototype.getKeysForValue=function(e){var t=this.keysByValue.get(e);return t?Array.from(t):[]}}(m),function(){function e(e,t,n){this.attributeObserver=new l(e,t,this),this.delegate=n,this.tokensByElement=new m}return Object.defineProperty(e.prototype,"started",{get:function(){return this.attributeObserver.started},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.attributeObserver.start()},e.prototype.stop=function(){this.attributeObserver.stop()},e.prototype.refresh=function(){this.attributeObserver.refresh()},Object.defineProperty(e.prototype,"element",{get:function(){return this.attributeObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributeName",{get:function(){return this.attributeObserver.attributeName},enumerable:!0,configurable:!0}),e.prototype.elementMatchedAttribute=function(e){this.tokensMatched(this.readTokensForElement(e))},e.prototype.elementAttributeValueChanged=function(e){var t=this.refreshTokensForElement(e),n=t[0],r=t[1];this.tokensUnmatched(n),this.tokensMatched(r)},e.prototype.elementUnmatchedAttribute=function(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))},e.prototype.tokensMatched=function(e){var t=this;e.forEach(function(e){return t.tokenMatched(e)})},e.prototype.tokensUnmatched=function(e){var t=this;e.forEach(function(e){return t.tokenUnmatched(e)})},e.prototype.tokenMatched=function(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)},e.prototype.tokenUnmatched=function(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)},e.prototype.refreshTokensForElement=function(e){var n,r,t,o=this.tokensByElement.getValuesForKey(e),i=this.readTokensForElement(e),s=(n=o,r=i,t=Math.max(n.length,r.length),Array.from({length:t},function(e,t){return[n[t],r[t]]})).findIndex(function(e){var t,n,r=e[0],o=e[1];return n=o,!((t=r)&&n&&t.index==n.index&&t.content==n.content)});return-1==s?[[],[]]:[o.slice(s),i.slice(s)]},e.prototype.readTokensForElement=function(e){var n,r,t=this.attributeName,o=e.getAttribute(t)||"";return n=e,r=t,o.trim().split(/\s+/).filter(function(e){return e.length}).map(function(e,t){return{element:n,attributeName:r,content:e,index:t}})},e}());var v,b=function(){function e(e,t,n){this.tokenListObserver=new g(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}return Object.defineProperty(e.prototype,"started",{get:function(){return this.tokenListObserver.started},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.tokenListObserver.start()},e.prototype.stop=function(){this.tokenListObserver.stop()},e.prototype.refresh=function(){this.tokenListObserver.refresh()},Object.defineProperty(e.prototype,"element",{get:function(){return this.tokenListObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributeName",{get:function(){return this.tokenListObserver.attributeName},enumerable:!0,configurable:!0}),e.prototype.tokenMatched=function(e){var t=e.element,n=this.fetchParseResultForToken(e).value;n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))},e.prototype.tokenUnmatched=function(e){var t=e.element,n=this.fetchParseResultForToken(e).value;n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))},e.prototype.fetchParseResultForToken=function(e){var t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t},e.prototype.fetchValuesByTokenForElement=function(e){var t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t},e.prototype.parseToken=function(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(e){return{error:e}}},e}(),E=function(){function e(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}return e.prototype.start=function(){this.valueListObserver||(this.valueListObserver=new b(this.element,this.actionAttribute,this),this.valueListObserver.start())},e.prototype.stop=function(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())},Object.defineProperty(e.prototype,"element",{get:function(){return this.context.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionAttribute",{get:function(){return this.schema.actionAttribute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this.context.schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindings",{get:function(){return Array.from(this.bindingsByAction.values())},enumerable:!0,configurable:!0}),e.prototype.connectAction=function(e){var t=new c(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)},e.prototype.disconnectAction=function(e){var t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))},e.prototype.disconnectAllActions=function(){var t=this;this.bindings.forEach(function(e){return t.delegate.bindingDisconnected(e)}),this.bindingsByAction.clear()},e.prototype.parseValueForToken=function(e){var t=i.forToken(e);if(t.identifier==this.identifier)return t},e.prototype.elementMatchedValue=function(e,t){this.connectAction(t)},e.prototype.elementUnmatchedValue=function(e,t){this.disconnectAction(t)},e}(),w=function(){function e(e,t){this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new E(this,this.dispatcher);try{this.controller.initialize()}catch(e){this.handleError(e,"initializing controller")}}return e.prototype.connect=function(){this.bindingObserver.start();try{this.controller.connect()}catch(e){this.handleError(e,"connecting controller")}},e.prototype.disconnect=function(){try{this.controller.disconnect()}catch(e){this.handleError(e,"disconnecting controller")}this.bindingObserver.stop()},Object.defineProperty(e.prototype,"application",{get:function(){return this.module.application},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.module.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this.application.schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dispatcher",{get:function(){return this.application.dispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return this.element.parentElement},enumerable:!0,configurable:!0}),e.prototype.handleError=function(e,t,n){void 0===n&&(n={});var r=this.identifier,o=this.controller,i=this.element;n=Object.assign({identifier:r,controller:o,element:i},n),this.application.handleError(e,"Error "+t,n)},e}(),O=(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function x(e){return{identifier:e.identifier,controllerConstructor:(t=e.controllerConstructor,n=A(t),n.bless(),n)};var t,n}var A=function(){function e(t){function n(){var e=this&&this instanceof n?this.constructor:void 0;return Reflect.construct(t,arguments,e)}return n.prototype=Object.create(t.prototype,{constructor:{value:n}}),Reflect.setPrototypeOf(n,t),n}try{return(t=e(function(){this.a.call(this)})).prototype.a=function(){},new t,e}catch(e){return function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t}(e)}}var t}(),k=function(){function e(e,t){this.application=e,this.definition=x(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}return Object.defineProperty(e.prototype,"identifier",{get:function(){return this.definition.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controllerConstructor",{get:function(){return this.definition.controllerConstructor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contexts",{get:function(){return Array.from(this.connectedContexts)},enumerable:!0,configurable:!0}),e.prototype.connectContextForScope=function(e){var t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()},e.prototype.disconnectContextForScope=function(e){var t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())},e.prototype.fetchContextForScope=function(e){var t=this.contextsByScope.get(e);return t||(t=new w(this,e),this.contextsByScope.set(e,t)),t},e}(),_=function(){function e(e){this.scope=e}return Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return e=this.getFormattedKey(e),this.element.getAttribute(e)},e.prototype.set=function(e,t){return e=this.getFormattedKey(e),this.element.setAttribute(e,t),this.get(e)},e.prototype.has=function(e){return e=this.getFormattedKey(e),this.element.hasAttribute(e)},e.prototype.delete=function(e){return!!this.has(e)&&(e=this.getFormattedKey(e),this.element.removeAttribute(e),!0)},e.prototype.getFormattedKey=function(e){return"data-"+this.identifier+"-"+e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})},e}();function C(e,t){return"["+e+'~="'+t+'"]'}var P=function(){function e(e){this.scope=e}return Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this.scope.schema},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return null!=this.find(e)},e.prototype.find=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.getSelectorForTargetNames(e);return this.scope.findElement(n)},e.prototype.findAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.getSelectorForTargetNames(e);return this.scope.findAllElements(n)},e.prototype.getSelectorForTargetNames=function(e){var t=this;return e.map(function(e){return t.getSelectorForTargetName(e)}).join(", ")},e.prototype.getSelectorForTargetName=function(e){var t=this.identifier+"."+e;return C(this.schema.targetAttribute,t)},e}(),T=function(){function e(e,t,n){this.schema=e,this.identifier=t,this.element=n,this.targets=new P(this),this.data=new _(this)}return e.prototype.findElement=function(e){return this.findAllElements(e)[0]},e.prototype.findAllElements=function(e){var t=this.element.matches(e)?[this.element]:[],n=this.filterElements(Array.from(this.element.querySelectorAll(e)));return t.concat(n)},e.prototype.filterElements=function(e){var t=this;return e.filter(function(e){return t.containsElement(e)})},e.prototype.containsElement=function(e){return e.closest(this.controllerSelector)===this.element},Object.defineProperty(e.prototype,"controllerSelector",{get:function(){return C(this.schema.controllerAttribute,this.identifier)},enumerable:!0,configurable:!0}),e}(),L=function(){function e(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new b(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}return e.prototype.start=function(){this.valueListObserver.start()},e.prototype.stop=function(){this.valueListObserver.stop()},Object.defineProperty(e.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!0,configurable:!0}),e.prototype.parseValueForToken=function(e){var t=e.element,n=e.content,r=this.fetchScopesByIdentifierForElement(t),o=r.get(n);return o||(o=new T(this.schema,n,t),r.set(n,o)),o},e.prototype.elementMatchedValue=function(e,t){var n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),1==n&&this.delegate.scopeConnected(t)},e.prototype.elementUnmatchedValue=function(e,t){var n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),1==n&&this.delegate.scopeDisconnected(t))},e.prototype.fetchScopesByIdentifierForElement=function(e){var t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t},e}(),S=function(){function e(e){this.application=e,this.scopeObserver=new L(this.element,this.schema,this),this.scopesByIdentifier=new m,this.modulesByIdentifier=new Map}return Object.defineProperty(e.prototype,"element",{get:function(){return this.application.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this.application.schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modules",{get:function(){return Array.from(this.modulesByIdentifier.values())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contexts",{get:function(){return this.modules.reduce(function(e,t){return e.concat(t.contexts)},[])},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.scopeObserver.start()},e.prototype.stop=function(){this.scopeObserver.stop()},e.prototype.loadDefinition=function(e){this.unloadIdentifier(e.identifier);var t=new k(this.application,e);this.connectModule(t)},e.prototype.unloadIdentifier=function(e){var t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)},e.prototype.getContextForElementAndIdentifier=function(t,e){var n=this.modulesByIdentifier.get(e);if(n)return n.contexts.find(function(e){return e.element==t})},e.prototype.handleError=function(e,t,n){this.application.handleError(e,t,n)},e.prototype.scopeConnected=function(e){this.scopesByIdentifier.add(e.identifier,e);var t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)},e.prototype.scopeDisconnected=function(e){this.scopesByIdentifier.delete(e.identifier,e);var t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)},e.prototype.connectModule=function(t){this.modulesByIdentifier.set(t.identifier,t),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(function(e){return t.connectContextForScope(e)})},e.prototype.disconnectModule=function(t){this.modulesByIdentifier.delete(t.identifier),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(function(e){return t.disconnectContextForScope(e)})},e}(),B={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target"},j=function(i,s,a,c){return new(a||(a=Promise))(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}o((c=c.apply(i,s||[])).next())})},M=function(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[0,s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},F=function(){function r(e,t){void 0===e&&(e=document.documentElement),void 0===t&&(t=B),this.element=e,this.schema=t,this.dispatcher=new n(this),this.router=new S(this)}return r.start=function(e,t){var n=new r(e,t);return n.start(),n},r.prototype.start=function(){return j(this,void 0,void 0,function(){return M(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",e):e()})];case 1:return e.sent(),this.router.start(),this.dispatcher.start(),[2]}})})},r.prototype.stop=function(){this.router.stop(),this.dispatcher.stop()},r.prototype.register=function(e,t){this.load({identifier:e,controllerConstructor:t})},r.prototype.load=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(Array.isArray(e)?e:[e].concat(n)).forEach(function(e){return t.router.loadDefinition(e)})},r.prototype.unload=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(Array.isArray(e)?e:[e].concat(n)).forEach(function(e){return t.router.unloadIdentifier(e)})},Object.defineProperty(r.prototype,"controllers",{get:function(){return this.router.contexts.map(function(e){return e.controller})},enumerable:!0,configurable:!0}),r.prototype.getControllerForElementAndIdentifier=function(e,t){var n=this.router.getContextForElementAndIdentifier(e,t);return n?n.controller:null},r.prototype.handleError=function(e,t,n){console.error("%s\n\n%o\n\n%o",t,e,n)},r}();function N(e){var t,i=e.prototype;(t=function(e){var t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t}(e),Array.from(t.reduce(function(t,e){var n,r;return(n=e,r=n.targets,Array.isArray(r)?r:[]).forEach(function(e){return t.add(e)}),t},new Set))).forEach(function(t){var e,n,r,o;return n=i,(e={})[t+"Target"]={get:function(){var e=this.targets.find(t);if(e)return e;throw new Error('Missing target element "'+this.identifier+"."+t+'"')}},e[t+"Targets"]={get:function(){return this.targets.findAll(t)}},e["has"+(o=t,o.charAt(0).toUpperCase()+o.slice(1))+"Target"]={get:function(){return this.targets.has(t)}},r=e,void Object.keys(r).forEach(function(e){if(!(e in n)){var t=r[e];Object.defineProperty(n,e,t)}})})}var I=function(){function e(e){this.context=e}return e.bless=function(){N(this)},Object.defineProperty(e.prototype,"application",{get:function(){return this.context.application},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this.context.scope},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targets",{get:function(){return this.scope.targets},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.scope.data},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){},e.prototype.connect=function(){},e.prototype.disconnect=function(){},e.targets=[],e}();e.Application=F,e.Context=w,e.Controller=I,e.defaultSchema=B,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Popper=t()}(this,function(){"use strict";for(var e="undefined"!=typeof window&&"undefined"!=typeof document,t=["Edge","Trident","Firefox"],n=0,r=0;r<t.length;r+=1)if(e&&0<=navigator.userAgent.indexOf(t[r])){n=1;break}var s=e&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},n))}};function a(e){return e&&"[object Function]"==={}.toString.call(e)}function E(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function h(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function d(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=E(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/(auto|scroll|overlay)/.test(n+o+r)?e:d(h(e))}var o=e&&!(!window.MSInputMethodContext||!document.documentMode),i=e&&/MSIE 10/.test(navigator.userAgent);function m(e){return 11===e?o:10===e?i:o||i}function j(e){if(!e)return document.documentElement;for(var t=m(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===E(n,"position")?j(n):n:e?e.ownerDocument.documentElement:document.documentElement}function l(e){return null!==e.parentNode?l(e.parentNode):e}function y(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,o=n?t:e,i=document.createRange();i.setStart(r,0),i.setEnd(o,0);var s,a,c=i.commonAncestorContainer;if(e!==c&&t!==c||r.contains(o))return"BODY"===(a=(s=c).nodeName)||"HTML"!==a&&j(s.firstElementChild)!==s?j(c):c;var u=l(e);return u.host?y(u.host,t):y(e,l(t).host)}function g(e){var t="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var r=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||r)[t]}return e[t]}function p(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+r+"Width"],10)}function c(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],m(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function v(e){var t=e.body,n=e.documentElement,r=m(10)&&getComputedStyle(n);return{height:c("Height",t,n,r),width:c("Width",t,n,r)}}var u=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),w=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function O(e){return M({},e,{right:e.left+e.width,bottom:e.top+e.height})}function F(e){var t={};try{if(m(10)){t=e.getBoundingClientRect();var n=g(e,"top"),r=g(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(e){}var o={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},i="HTML"===e.nodeName?v(e.ownerDocument):{},s=i.width||e.clientWidth||o.right-o.left,a=i.height||e.clientHeight||o.bottom-o.top,c=e.offsetWidth-s,u=e.offsetHeight-a;if(c||u){var l=E(e);c-=p(l,"x"),u-=p(l,"y"),o.width-=c,o.height-=u}return O(o)}function b(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=m(10),o="HTML"===t.nodeName,i=F(e),s=F(t),a=d(e),c=E(t),u=parseFloat(c.borderTopWidth,10),l=parseFloat(c.borderLeftWidth,10);n&&o&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var p=O({top:i.top-s.top-u,left:i.left-s.left-l,width:i.width,height:i.height});if(p.marginTop=0,p.marginLeft=0,!r&&o){var f=parseFloat(c.marginTop,10),h=parseFloat(c.marginLeft,10);p.top-=u-f,p.bottom-=u-f,p.left-=l-h,p.right-=l-h,p.marginTop=f,p.marginLeft=h}return(r&&!n?t.contains(a):t===a&&"BODY"!==a.nodeName)&&(p=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=g(t,"top"),o=g(t,"left"),i=n?-1:1;return e.top+=r*i,e.bottom+=r*i,e.left+=o*i,e.right+=o*i,e}(p,t)),p}function x(e){if(!e||!e.parentElement||m())return document.documentElement;for(var t=e.parentElement;t&&"none"===E(t,"transform");)t=t.parentElement;return t||document.documentElement}function f(e,t,n,r){var o=4<arguments.length&&void 0!==arguments[4]&&arguments[4],i={top:0,left:0},s=o?x(e):y(e,t);if("viewport"===r)i=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=b(e,n),o=Math.max(n.clientWidth,window.innerWidth||0),i=Math.max(n.clientHeight,window.innerHeight||0),s=t?0:g(n),a=t?0:g(n,"left");return O({top:s-r.top+r.marginTop,left:a-r.left+r.marginLeft,width:o,height:i})}(s,o);else{var a=void 0;"scrollParent"===r?"BODY"===(a=d(h(t))).nodeName&&(a=e.ownerDocument.documentElement):a="window"===r?e.ownerDocument.documentElement:r;var c=b(a,s,o);if("HTML"!==a.nodeName||function e(t){var n=t.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===E(t,"position"))return!0;var r=h(t);return!!r&&e(r)}(s))i=c;else{var u=v(e.ownerDocument),l=u.height,p=u.width;i.top+=c.top-c.marginTop,i.bottom=l+c.top,i.left+=c.left-c.marginLeft,i.right=p+c.left}}var f="number"==typeof(n=n||0);return i.left+=f?n:n.left||0,i.top+=f?n:n.top||0,i.right-=f?n:n.right||0,i.bottom-=f?n:n.bottom||0,i}function A(e,t,r,n,o){var i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var s=f(r,n,i,o),a={top:{width:s.width,height:t.top-s.top},right:{width:s.right-t.right,height:s.height},bottom:{width:s.width,height:s.bottom-t.bottom},left:{width:t.left-s.left,height:s.height}},c=Object.keys(a).map(function(e){return M({key:e},a[e],{area:(t=a[e],t.width*t.height)});var t}).sort(function(e,t){return t.area-e.area}),u=c.filter(function(e){var t=e.width,n=e.height;return t>=r.clientWidth&&n>=r.clientHeight}),l=0<u.length?u[0].key:c[0].key,p=e.split("-")[1];return l+(p?"-"+p:"")}function k(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return b(n,r?x(t):y(t,n),r)}function _(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),r=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function C(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function P(e,t,n){n=n.split("-")[0];var r=_(e),o={width:r.width,height:r.height},i=-1!==["right","left"].indexOf(n),s=i?"top":"left",a=i?"left":"top",c=i?"height":"width",u=i?"width":"height";return o[s]=t[s]+t[c]/2-r[c]/2,o[a]=n===a?t[a]-r[u]:t[C(a)],o}function N(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function T(e,n,t){return(void 0===t?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var r=N(e,function(e){return e[t]===n});return e.indexOf(r)}(e,"name",t))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var t=e.function||e.fn;e.enabled&&a(t)&&(n.offsets.popper=O(n.offsets.popper),n.offsets.reference=O(n.offsets.reference),n=t(n,e))}),n}function L(e,n){return e.some(function(e){var t=e.name;return e.enabled&&t===n})}function I(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var o=t[r],i=o?""+o+n:e;if(void 0!==document.body.style[i])return i}return null}function S(e){var t=e.ownerDocument;return t?t.defaultView:window}function B(e,t,n,r){n.updateBound=r,S(e).addEventListener("resize",n.updateBound,{passive:!0});var o=d(e);return function e(t,n,r,o){var i="BODY"===t.nodeName,s=i?t.ownerDocument.defaultView:t;s.addEventListener(n,r,{passive:!0}),i||e(d(s.parentNode),n,r,o),o.push(s)}(o,"scroll",n.updateBound,n.scrollParents),n.scrollElement=o,n.eventsEnabled=!0,n}function D(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,S(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function H(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function V(n,r){Object.keys(r).forEach(function(e){var t="";-1!==["width","height","top","right","bottom","left"].indexOf(e)&&H(r[e])&&(t="px"),n.style[e]=r[e]+t})}var U=e&&/Firefox/i.test(navigator.userAgent);function W(e,t,n){var r=N(e,function(e){return e.name===t}),o=!!r&&e.some(function(e){return e.name===n&&e.enabled&&e.order<r.order});if(!o){var i="`"+t+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")}return o}var R=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],K=R.slice(3);function z(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=K.indexOf(e),r=K.slice(n+1).concat(K.slice(0,n));return t?r.reverse():r}var q="flip",Y="clockwise",G="counterclockwise";function X(e,o,i,t){var s=[0,0],a=-1!==["right","left"].indexOf(t),n=e.split(/(\+|\-)/).map(function(e){return e.trim()}),r=n.indexOf(N(n,function(e){return-1!==e.search(/,|\s/)}));n[r]&&-1===n[r].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var c=/\s*,\s*|\s+/,u=-1!==r?[n.slice(0,r).concat([n[r].split(c)[0]]),[n[r].split(c)[1]].concat(n.slice(r+1))]:[n];return(u=u.map(function(e,t){var n=(1===t?!a:a)?"height":"width",r=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,r=!0,e):r?(e[e.length-1]+=t,r=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,n,r){var o=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),i=+o[1],s=o[2];if(!i)return e;if(0===s.indexOf("%")){var a=void 0;switch(s){case"%p":a=n;break;case"%":case"%r":default:a=r}return O(a)[t]/100*i}if("vh"===s||"vw"===s)return("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*i;return i}(e,n,o,i)})})).forEach(function(n,r){n.forEach(function(e,t){H(e)&&(s[r]+=e*("-"===n[t-1]?-1:1))})}),s}var Z={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var o=e.offsets,i=o.reference,s=o.popper,a=-1!==["bottom","top"].indexOf(n),c=a?"left":"top",u=a?"width":"height",l={start:w({},c,i[c]),end:w({},c,i[c]+i[u]-s[u])};e.offsets.popper=M({},s,l[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,r=e.placement,o=e.offsets,i=o.popper,s=o.reference,a=r.split("-")[0],c=void 0;return c=H(+n)?[+n,0]:X(n,i,s,a),"left"===a?(i.top+=c[0],i.left-=c[1]):"right"===a?(i.top+=c[0],i.left+=c[1]):"top"===a?(i.left+=c[0],i.top-=c[1]):"bottom"===a&&(i.left+=c[0],i.top+=c[1]),e.popper=i,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,r){var t=r.boundariesElement||j(e.instance.popper);e.instance.reference===t&&(t=j(t));var n=I("transform"),o=e.instance.popper.style,i=o.top,s=o.left,a=o[n];o.top="",o.left="",o[n]="";var c=f(e.instance.popper,e.instance.reference,r.padding,t,e.positionFixed);o.top=i,o.left=s,o[n]=a,r.boundaries=c;var u=r.priority,l=e.offsets.popper,p={primary:function(e){var t=l[e];return l[e]<c[e]&&!r.escapeWithReference&&(t=Math.max(l[e],c[e])),w({},e,t)},secondary:function(e){var t="right"===e?"left":"top",n=l[t];return l[e]>c[e]&&!r.escapeWithReference&&(n=Math.min(l[t],c[e]-("right"===e?l.width:l.height))),w({},t,n)}};return u.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";l=M({},l,p[t](e))}),e.offsets.popper=l,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,r=t.reference,o=e.placement.split("-")[0],i=Math.floor,s=-1!==["top","bottom"].indexOf(o),a=s?"right":"bottom",c=s?"left":"top",u=s?"width":"height";return n[a]<i(r[c])&&(e.offsets.popper[c]=i(r[c])-n[u]),n[c]>i(r[a])&&(e.offsets.popper[c]=i(r[a])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!W(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"==typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var o=e.placement.split("-")[0],i=e.offsets,s=i.popper,a=i.reference,c=-1!==["left","right"].indexOf(o),u=c?"height":"width",l=c?"Top":"Left",p=l.toLowerCase(),f=c?"left":"top",h=c?"bottom":"right",d=_(r)[u];a[h]-d<s[p]&&(e.offsets.popper[p]-=s[p]-(a[h]-d)),a[p]+d>s[h]&&(e.offsets.popper[p]+=a[p]+d-s[h]),e.offsets.popper=O(e.offsets.popper);var m=a[p]+a[u]/2-d/2,y=E(e.instance.popper),g=parseFloat(y["margin"+l],10),v=parseFloat(y["border"+l+"Width"],10),b=m-e.offsets.popper[p]-g-v;return b=Math.max(Math.min(s[u]-d,b),0),e.arrowElement=r,e.offsets.arrow=(w(n={},p,Math.round(b)),w(n,f,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(y,g){if(L(y.instance.modifiers,"inner"))return y;if(y.flipped&&y.placement===y.originalPlacement)return y;var v=f(y.instance.popper,y.instance.reference,g.padding,g.boundariesElement,y.positionFixed),b=y.placement.split("-")[0],E=C(b),w=y.placement.split("-")[1]||"",O=[];switch(g.behavior){case q:O=[b,E];break;case Y:O=z(b);break;case G:O=z(b,!0);break;default:O=g.behavior}return O.forEach(function(e,t){if(b!==e||O.length===t+1)return y;b=y.placement.split("-")[0],E=C(b);var n,r=y.offsets.popper,o=y.offsets.reference,i=Math.floor,s="left"===b&&i(r.right)>i(o.left)||"right"===b&&i(r.left)<i(o.right)||"top"===b&&i(r.bottom)>i(o.top)||"bottom"===b&&i(r.top)<i(o.bottom),a=i(r.left)<i(v.left),c=i(r.right)>i(v.right),u=i(r.top)<i(v.top),l=i(r.bottom)>i(v.bottom),p="left"===b&&a||"right"===b&&c||"top"===b&&u||"bottom"===b&&l,f=-1!==["top","bottom"].indexOf(b),h=!!g.flipVariations&&(f&&"start"===w&&a||f&&"end"===w&&c||!f&&"start"===w&&u||!f&&"end"===w&&l),d=!!g.flipVariationsByContent&&(f&&"start"===w&&c||f&&"end"===w&&a||!f&&"start"===w&&l||!f&&"end"===w&&u),m=h||d;(s||p||m)&&(y.flipped=!0,(s||p)&&(b=O[t+1]),m&&(w="end"===(n=w)?"start":"start"===n?"end":n),y.placement=b+(w?"-"+w:""),y.offsets.popper=M({},y.offsets.popper,P(y.instance.popper,y.offsets.reference,y.placement)),y=T(y.instance.modifiers,y,"flip"))}),y},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,o=r.popper,i=r.reference,s=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return o[s?"left":"top"]=i[n]-(a?o[s?"width":"height"]:0),e.placement=C(t),e.offsets.popper=O(o),e}},hide:{order:800,enabled:!0,fn:function(e){if(!W(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=N(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,r=t.y,o=e.offsets.popper,i=N(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==i&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s,a,c,u,l,p,f,h,d,m,y,g,v,b,E=void 0!==i?i:t.gpuAcceleration,w=j(e.instance.popper),O=F(w),x={position:o.position},A=(s=e,a=window.devicePixelRatio<2||!U,c=s.offsets,u=c.popper,l=c.reference,p=Math.round,f=Math.floor,h=function(e){return e},d=p(l.width),m=p(u.width),y=-1!==["left","right"].indexOf(s.placement),g=-1!==s.placement.indexOf("-"),b=a?p:h,{left:(v=a?y||g||d%2==m%2?p:f:h)(d%2==1&&m%2==1&&!g&&a?u.left-1:u.left),top:b(u.top),bottom:b(u.bottom),right:v(u.right)}),k="bottom"===n?"top":"bottom",_="right"===r?"left":"right",C=I("transform"),P=void 0,T=void 0;if(T="bottom"===k?"HTML"===w.nodeName?-w.clientHeight+A.bottom:-O.height+A.bottom:A.top,P="right"===_?"HTML"===w.nodeName?-w.clientWidth+A.right:-O.width+A.right:A.left,E&&C)x[C]="translate3d("+P+"px, "+T+"px, 0)",x[k]=0,x[_]=0,x.willChange="transform";else{var L="bottom"===k?-1:1,S="right"===_?-1:1;x[k]=T*L,x[_]=P*S,x.willChange=k+", "+_}var B={"x-placement":e.placement};return e.attributes=M({},B,e.attributes),e.styles=M({},x,e.styles),e.arrowStyles=M({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return V(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach(function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)}),e.arrowElement&&Object.keys(e.arrowStyles).length&&V(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,r,o){var i=k(o,t,e,n.positionFixed),s=A(n.placement,i,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",s),V(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},$=function(){function i(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=s(this.update.bind(this)),this.options=M({},i.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=t&&t.jquery?t[0]:t,this.options.modifiers={},Object.keys(M({},i.Defaults.modifiers,r.modifiers)).forEach(function(e){n.options.modifiers[e]=M({},i.Defaults.modifiers[e]||{},r.modifiers?r.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return M({name:e},n.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&a(e.onLoad)&&e.onLoad(n.reference,n.popper,n.options,e,n.state)}),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return u(i,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=k(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=A(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=P(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=T(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,L(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[I("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=B(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return D.call(this)}}]),i}();return $.Utils=("undefined"!=typeof window?window:global).PopperUtils,$.placements=R,$.Defaults=Z,$});var __extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(u){var e=function(c){function r(){return null!==c&&c.apply(this,arguments)||this}return __extends(r,c),r.prototype.load=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=Array.isArray(e)?e:[e].concat(t),o=0,i=r;o<i.length;o++){var s=i[o],a=/^s-/.test(s.identifier);if(u._initializing&&!a)throw'Stacks-created Stimulus controller names must start with "s-".';if(!u._initializing&&a)throw'The "s-" prefix on Stimulus controller names is reserved for Stacks-created controllers.'}c.prototype.load.call(this,r)},r.start=function(e,t){var n=new r(e,t);return n.start(),n},r}(Stimulus.Application);u.application=e.start(),u._initializing=!0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getElementData=function(e,t){return e.getAttribute("data-"+this.identifier+"-"+t)},t.prototype.setElementData=function(e,t,n){e.setAttribute("data-"+this.identifier+"-"+t,n)},t.prototype.removeElementData=function(e,t){e.removeAttribute("data-"+this.identifier+"-"+t)},t.prototype.triggerEvent=function(e,t,n){var r,o=this.identifier+":"+e;try{r=new CustomEvent(o,{bubbles:!0,cancelable:!0,detail:t})}catch(e){(r=document.createEvent("CustomEvent")).initCustomEvent(o,!0,!0,t)}return(n||this.element).dispatchEvent(r),r},t}(Stimulus.Controller);function n(e){var t,n=e.hasOwnProperty("targets")?((t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o)).targets=e.targets,t):function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o);for(var r in e)"targets"!==r&&e.hasOwnProperty(r)&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(e,r));return n}u.StacksController=o,u.createController=n,u.addController=function(e,t){u.application.register(e,n(t))}}(Stacks||(Stacks={}));__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(){var r="s-expandable-control:radio-off";function t(n){var e=n.target;e instanceof HTMLInputElement&&"INPUT"===e.nodeName&&"radio"===e.type&&document.querySelectorAll('input[type="radio"][name="'+e.name+'"]').forEach(function(e){if(e!==n.target){var t;try{t=new Event(r)}catch(e){(t=document.createEvent("Event")).initEvent(r,!0,!0)}e.dispatchEvent(t)}})}var n=0;function o(e){e?1===++n&&document.body.addEventListener("change",t):0===--n&&document.body.removeEventListener("change",t)}Stacks.application.register("s-expandable-control",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){"INPUT"===this.element.nodeName&&0<=["radio","checkbox"].indexOf(this.element.type)?(this.isCollapsed=this._isCollapsedForCheckable,this.events=["change",r],this.isCheckable=!0,this.isRadio="radio"===this.element.type):(this.isCollapsed=this._isCollapsedForClickable,this.events=["click","keydown"]),this.listener=this.listener.bind(this)},t.prototype._isCollapsedForClickable=function(){var e=this.controlledCollapsible;return e?!e.classList.contains("is-expanded"):"false"===this.element.getAttribute("aria-expanded")},t.prototype._isCollapsedForCheckable=function(){return!this.element.checked},Object.defineProperty(t.prototype,"controlledCollapsible",{get:function(){var e=this.element.getAttribute("aria-controls");if(!e)throw"couldn't find controls";var t=document.getElementById(e);if(!t)throw"couldn't find controls";return t},enumerable:!0,configurable:!0}),t.prototype._dispatchShowHideEvent=function(e){this.triggerEvent(e?"show":"hide")},t.prototype._toggleClass=function(t){if(this.data.has("toggle-class")){var n=this.element.classList,e=this.data.get("toggle-class");if(!e)throw"couldn't find toggle class";e.split(/\s+/).forEach(function(e){n.toggle(e,!!t)})}},t.prototype.listener=function(e){var t;if(this.isCheckable)t=!this.element.checked;else{if("keydown"==e.type&&e instanceof KeyboardEvent&&13!=e.keyCode&&32!=e.keyCode)return;if(e.target!==e.currentTarget&&0<=["A","BUTTON"].indexOf(e.target.nodeName))return;t="true"===this.element.getAttribute("aria-expanded"),e.preventDefault(),"click"===e.type&&this.element.blur()}this.element.setAttribute("aria-expanded",t?"false":"true"),this.controlledCollapsible.classList.toggle("is-expanded",!t),this._dispatchShowHideEvent(!t),this._toggleClass(!t)},t.prototype.connect=function(){var t=this;if(this.events.forEach(function(e){t.element.addEventListener(e,t.listener)},this),this.isRadio&&o(!0),this.element.setAttribute("aria-expanded",this.isCollapsed()?"false":"true"),this.isCheckable){var e=this.controlledCollapsible;if(e){var n=!this.isCollapsed();n!==e.classList.contains("is-expanded")&&(e.classList.toggle("is-expanded",n),this._dispatchShowHideEvent(n),this._toggleClass(n))}}},t.prototype.disconnect=function(){var t=this;this.events.forEach(function(e){t.element.removeEventListener(e,t.listener)},this),this.isRadio&&o(!1)},t}(Stacks.StacksController))}();__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var ModalController=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.connect=function(){},t.prototype.disconnect=function(){this._unbindDocumentEvents()},t.prototype.toggle=function(){this._toggle()},t.prototype.show=function(){this._toggle(!0)},t.prototype.hide=function(){this._toggle(!1)},t.prototype._toggle=function(e){var t=e;void 0===t&&(t="true"===this.modalTarget.getAttribute("aria-hidden")),this.triggerEvent(t?"show":"hide"),this.modalTarget.setAttribute("aria-hidden",t?"false":"true"),t?this._bindDocumentEvents():this._unbindDocumentEvents(),this.triggerEvent(t?"shown":"hidden")},t.prototype._bindDocumentEvents=function(){this._boundClickFn=this._boundClickFn||this._hideOnOutsideClick.bind(this),this._boundKeypressFn=this._boundKeypressFn||this._hideOnEscapePress.bind(this),document.addEventListener("click",this._boundClickFn),document.addEventListener("keyup",this._boundKeypressFn)},t.prototype._unbindDocumentEvents=function(){document.removeEventListener("click",this._boundClickFn),document.removeEventListener("keyup",this._boundKeypressFn)},t.prototype._hideOnOutsideClick=function(e){var t=e.target;this.modalTarget.querySelector(".s-modal--dialog").contains(t)||this._toggle(!1)},t.prototype._hideOnEscapePress=function(e){27===e.which&&"true"!==this.modalTarget.getAttribute("aria-hidden")&&this._toggle(!1)},t.targets=["modal"],t}(Stacks.StacksController);function toggleModal(e,t){var n=Stacks.application.getControllerForElementAndIdentifier(e,"s-modal");if(!n)throw"Unable to get s-modal controller from element";n._toggle(t)}exports.toggleModal=toggleModal,Stacks.application.register("s-modal",ModalController);__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"isVisible",{get:function(){var e=this.popoverElement;return!!e&&e.classList.contains("is-visible")},enumerable:!0,configurable:!0}),t.prototype.connect=function(){e.prototype.connect.call(this),this.validate(),this.isVisible&&this.initializePopper()},t.prototype.disconnect=function(){this.hide(),this.popper&&(this.popper.destroy(),this.popper=null),e.prototype.disconnect.call(this)},t.prototype.toggle=function(){this.isVisible?this.hide():this.show()},t.prototype.show=function(){this.isVisible||this.triggerEvent("show").defaultPrevented||(this.popper||this.initializePopper(),this.popoverElement.classList.add("is-visible"),this.popper.enableEventListeners(),this.scheduleUpdate(),this.shown())},t.prototype.hide=function(){this.isVisible&&(this.triggerEvent("hide").defaultPrevented||(this.popoverElement.classList.remove("is-visible"),this.popper&&this.popper.disableEventListeners(),this.hidden()))},t.prototype.shown=function(){this.bindDocumentEvents(),this.triggerEvent("shown")},t.prototype.hidden=function(){this.unbindDocumentEvents(),this.triggerEvent("hidden")},t.prototype.generatePopover=function(){return null},t.prototype.initializePopper=function(){this.popper=new Popper(this.referenceElement,this.popoverElement,{eventsEnabled:this.isVisible}),this.popper.options.placement=this.data.get("placement")||"bottom"},t.prototype.validate=function(){var e=this.data.get("reference-selector");if(this.referenceElement=this.element,e&&(this.referenceElement=this.element.querySelector(e),!this.referenceElement))throw"Unable to find element by reference selector: "+e;var t=this.referenceElement.getAttribute(this.popoverSelectorAttribute),n=null;if(t){if(!(n=document.getElementById(t)))throw"["+this.popoverSelectorAttribute+'="{POPOVER_ID}"] required'}else n=this.generatePopover();if(!n)throw"unable to find or generate popover element";this.popoverElement=n},t.prototype.scheduleUpdate=function(){this.popper&&this.isVisible&&this.popper.scheduleUpdate()},t}(e.StacksController),n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popoverSelectorAttribute="aria-controls",e}return __extends(e,t),e.prototype.shown=function(){this.toggleOptionalClasses(!0),t.prototype.shown.call(this)},e.prototype.hidden=function(){this.toggleOptionalClasses(!1),t.prototype.hidden.call(this)},e.prototype.bindDocumentEvents=function(){this.boundHideOnOutsideClick=this.boundHideOnOutsideClick||this.hideOnOutsideClick.bind(this),this.boundHideOnEscapePress=this.boundHideOnEscapePress||this.hideOnEscapePress.bind(this),document.addEventListener("click",this.boundHideOnOutsideClick),document.addEventListener("keyup",this.boundHideOnEscapePress)},e.prototype.unbindDocumentEvents=function(){document.removeEventListener("click",this.boundHideOnOutsideClick),document.removeEventListener("keyup",this.boundHideOnEscapePress)},e.prototype.hideOnOutsideClick=function(e){var t=e.target;this.referenceElement.contains(t)||this.popoverElement.contains(t)||this.hide()},e.prototype.hideOnEscapePress=function(e){27===e.which&&this.isVisible&&(this.popoverElement.contains(e.target)&&this.referenceElement.focus(),this.hide())},e.prototype.toggleOptionalClasses=function(t){if(this.data.has("toggle-class")){var n=this.referenceElement.classList;this.data.get("toggle-class").split(/\s+/).forEach(function(e){n.toggle(e,t)})}},e.targets=[],e}(e.BasePopoverController=t);e.PopoverController=n}(Stacks||(Stacks={})),Stacks.application.register("s-popover",Stacks.PopoverController);__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(){var e;function f(e,t){for(var n=[],r=e.children[0],o=[],i=[];r||i.some(function(e){return 0!==e});){var s=[];n.push(s);var a=0;if(r)for(var c=0;c<r.children.length;c++){for(;i[a];)i[a]--,s[a]=o[a],a++;var u=r.children[c];if(!(u instanceof HTMLTableCellElement))throw"invalid table";if("none"!==getComputedStyle(u).display){if(u===t)return a;for(var l=a+u.colSpan;a<l;a++)i[a]=u.rowSpan-1,o[a]=u,s[a]=u}}for(;a<o.length;)i[a]&&(i[a]--,s[a]=o[a]),a++;r&&(r=r.nextElementSibling)}return t?-1:n}Stacks.application.register("s-table",((e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setCurrentSort=function(t,r){if(["asc","desc","none"].indexOf(r)<0)throw"direction must be one of asc, desc, or none";var o=this;this.columnTargets.forEach(function(e){var n=e===t;e.classList.toggle("is-sorted",n&&"none"!==r),e.querySelectorAll(".js-sorting-indicator").forEach(function(e){var t=n?r:"none";e.classList.toggle("d-none",!e.classList.contains("js-sorting-indicator-"+t))}),n&&"none"!==r?o.setElementData(e,"sort-direction",r):o.removeElementData(e,"sort-direction")})},t.prototype.sort=function(e){var s=this,t=e.currentTarget;if(!(t instanceof HTMLTableCellElement))throw"invalid event target";var n=this.element,r=n.tBodies[0],a=function(e){if(!(e.parentElement&&e.parentElement.parentElement instanceof HTMLTableSectionElement))throw"invalid table";var t=f(e.parentElement.parentElement,e);if("number"!=typeof t)throw"shouldn't happen";return t}(t);if(!(a<0)){var c,u=function(e){var t=f(e);if(!(t instanceof Array))throw"shouldn't happen";return t}(r),o="asc"===this.getElementData(t,"sort-direction")?-1:1,i=Array.from(n.tBodies[0].rows),l=!1,p=[];i.forEach(function(e,t){var n=s.getElementData(e,"sort-to");if("top"!==n)if("bottom"!==n){var r=u[t][a];if(r){var o=s.getElementData(r,"sort-val"),i="string"==typeof o?o:r.textContent.trim();""!==i&&parseInt(i,10)+""!==i&&(l=!0),p.push([i,t])}else p.push(["",t])}else c||(c=e)}),l||p.forEach(function(e){e[0]=""===e[0]?Number.MIN_VALUE:parseInt(e[0],10)}),p.sort(function(e,t){return e[0]>t[0]?1*o:e[0]<t[0]?-1*o:e[1]>t[1]?1:-1}),p.forEach(function(e){var t=i[e[1]];t.parentElement.removeChild(t),c?r.insertBefore(t,c):r.appendChild(t)}),this.setCurrentSort(t,1===o?"asc":"desc")}},t}(Stacks.StacksController)).targets=["column"],e))}();var Stacks;__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(r){var e=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.popoverSelectorAttribute="aria-describedby",e}return __extends(a,t),a.prototype.connect=function(){t.prototype.connect.call(this),window.matchMedia("(hover: hover)").matches&&this.bindMouseEvents()},a.prototype.disconnect=function(){this.unbindMouseEvents(),t.prototype.disconnect.call(this)},a.prototype.show=function(){var e=r.application.getControllerForElementAndIdentifier(this.element,"s-popover");e&&e.isVisible||t.prototype.show.call(this)},a.prototype.applyTitleAttributes=function(){var e,t=this.data.get("html-title");if(t)e=document.createRange().createContextualFragment(t);else{var n=this.element.getAttribute("title");if(!n)return null;e=document.createTextNode(n)}this.data.delete("html-title"),this.element.removeAttribute("title");var r=this.element.getAttribute("aria-describedby");r||(r=a.generateId(),this.element.setAttribute("aria-describedby",r));var o=document.getElementById(r);if(!o){(o=document.createElement("div")).id=r,o.className="s-popover s-popover__tooltip pe-none",o.setAttribute("aria-hidden","true"),o.setAttribute("role","tooltip");var i=this.element.parentNode;i?i.insertBefore(o,this.element.nextSibling):document.body.appendChild(o)}var s=o.querySelector(".s-popover--arrow");return o.innerHTML="",o.appendChild(e),s?o.appendChild(s):o.insertAdjacentHTML("beforeend",'<div class="s-popover--arrow"></div>'),this.scheduleUpdate(),o},a.prototype.bindDocumentEvents=function(){this.boundHideIfWithin=this.boundHideIfWithin||this.hideIfWithin.bind(this),document.addEventListener("s-popover:shown",this.boundHideIfWithin)},a.prototype.unbindDocumentEvents=function(){document.removeEventListener("s-popover:shown",this.boundHideIfWithin)},a.prototype.generatePopover=function(){return this.applyTitleAttributes()},a.prototype.hideIfWithin=function(e){e.target.contains(this.referenceElement)&&this.hide()},a.prototype.bindMouseEvents=function(){this.boundShow=this.boundShow||this.show.bind(this),this.boundHide=this.boundHide||this.hide.bind(this),this.referenceElement.addEventListener("mouseover",this.boundShow),this.referenceElement.addEventListener("mouseout",this.boundHide)},a.prototype.unbindMouseEvents=function(){this.referenceElement.removeEventListener("mouseover",this.boundShow),this.referenceElement.removeEventListener("mouseout",this.boundHide)},a.generateId=function(){return"--stacks-s-tooltip-"+Math.random().toString(36).substring(2,10)},a.targets=[],a}(r.BasePopoverController);function o(e,t){t&&t.placement&&e.setAttribute("data-s-tooltip-placement",t.placement);var n=r.application.getControllerForElementAndIdentifier(e,"s-tooltip");n?n.applyTitleAttributes():e.setAttribute("data-controller",e.getAttribute("data-controller")+" s-tooltip")}r.TooltipController=e,r.setTooltipHtml=function(e,t,n){e.setAttribute("data-s-tooltip-html-title",t),e.removeAttribute("title"),o(e,n)},r.setTooltipText=function(e,t,n){e.setAttribute("title",t),e.removeAttribute("data-s-tooltip-html-title"),o(e,n)}}(Stacks||(Stacks={})),Stacks.application.register("s-tooltip",Stacks.TooltipController),Stacks._initializing=!1;