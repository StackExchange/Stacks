!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Stimulus={})}(this,function(e){"use strict";var r=(t.prototype.connect=function(){this.eventTarget.addEventListener(this.eventName,this,!1)},t.prototype.disconnect=function(){this.eventTarget.removeEventListener(this.eventName,this,!1)},t.prototype.bindingConnected=function(e){this.unorderedBindings.add(e)},t.prototype.bindingDisconnected=function(e){this.unorderedBindings.delete(e)},t.prototype.handleEvent=function(e){for(var t=function(e){if("immediatePropagationStopped"in e)return e;var t=e.stopImmediatePropagation;return Object.assign(e,{immediatePropagationStopped:!1,stopImmediatePropagation:function(){this.immediatePropagationStopped=!0,t.call(this)}})}(e),n=0,r=this.bindings;n<r.length;n++){var o=r[n];if(t.immediatePropagationStopped)break;o.handleEvent(t)}},Object.defineProperty(t.prototype,"bindings",{get:function(){return Array.from(this.unorderedBindings).sort(function(e,t){var n=e.index,r=t.index;return n<r?-1:r<n?1:0})},enumerable:!0,configurable:!0}),t);function t(e,t){this.eventTarget=e,this.eventName=t,this.unorderedBindings=new Set}var n=(o.prototype.start=function(){this.started||(this.started=!0,this.eventListeners.forEach(function(e){return e.connect()}))},o.prototype.stop=function(){this.started&&(this.started=!1,this.eventListeners.forEach(function(e){return e.disconnect()}))},Object.defineProperty(o.prototype,"eventListeners",{get:function(){return Array.from(this.eventListenerMaps.values()).reduce(function(e,t){return e.concat(Array.from(t.values()))},[])},enumerable:!0,configurable:!0}),o.prototype.bindingConnected=function(e){this.fetchEventListenerForBinding(e).bindingConnected(e)},o.prototype.bindingDisconnected=function(e){this.fetchEventListenerForBinding(e).bindingDisconnected(e)},o.prototype.handleError=function(e,t,n){void 0===n&&(n={}),this.application.handleError(e,"Error "+t,n)},o.prototype.fetchEventListenerForBinding=function(e){var t=e.eventTarget,n=e.eventName;return this.fetchEventListener(t,n)},o.prototype.fetchEventListener=function(e,t){var n=this.fetchEventListenerMapForEventTarget(e),r=n.get(t);return r||(r=this.createEventListener(e,t),n.set(t,r)),r},o.prototype.createEventListener=function(e,t){var n=new r(e,t);return this.started&&n.connect(),n},o.prototype.fetchEventListenerMapForEventTarget=function(e){var t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t},o);function o(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}var i=/^((.+?)(@(window|document))?->)?(.+?)(#(.+))?$/;function s(e){var t=e.trim().match(i)||[];return{eventTarget:function(e){{if("window"==e)return window;if("document"==e)return document}}(t[4]),eventName:t[2],identifier:t[5],methodName:t[7]}}var a=(c.forToken=function(e){return new this(e.element,e.index,s(e.content))},c.prototype.toString=function(){var e=this.eventTargetName?"@"+this.eventTargetName:"";return this.eventName+e+"->"+this.identifier+"#"+this.methodName},Object.defineProperty(c.prototype,"eventTargetName",{get:function(){return(e=this.eventTarget)==window?"window":e==document?"document":void 0;var e},enumerable:!0,configurable:!0}),c);function c(e,t,n){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||function(e){var t=e.tagName.toLowerCase();if(t in u)return u[t](e)}(e)||l("missing event name"),this.identifier=n.identifier||l("missing identifier"),this.methodName=n.methodName||l("missing method name")}var u={a:function(e){return"click"},button:function(e){return"click"},form:function(e){return"submit"},input:function(e){return"submit"==e.getAttribute("type")?"click":"change"},select:function(e){return"change"},textarea:function(e){return"change"}};function l(e){throw new Error(e)}var p=(Object.defineProperty(d.prototype,"index",{get:function(){return this.action.index},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"eventTarget",{get:function(){return this.action.eventTarget},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!0,configurable:!0}),d.prototype.handleEvent=function(e){this.willBeInvokedByEvent(e)&&this.invokeWithEvent(e)},Object.defineProperty(d.prototype,"eventName",{get:function(){return this.action.eventName},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"method",{get:function(){var e=this.controller[this.methodName];if("function"==typeof e)return e;throw new Error('Action "'+this.action+'" references undefined method "'+this.methodName+'"')},enumerable:!0,configurable:!0}),d.prototype.invokeWithEvent=function(t){try{this.method.call(this.controller,t)}catch(e){var n={identifier:this.identifier,controller:this.controller,element:this.element,index:this.index,event:t};this.context.handleError(e,'invoking action "'+this.action+'"',n)}},d.prototype.willBeInvokedByEvent=function(e){var t=e.target;return this.element===t||!(t instanceof Element&&this.element.contains(t))||this.scope.containsElement(t)},Object.defineProperty(d.prototype,"controller",{get:function(){return this.context.controller},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"methodName",{get:function(){return this.action.methodName},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"scope",{get:function(){return this.context.scope},enumerable:!0,configurable:!0}),d);function d(e,t){this.context=e,this.action=t}var f=(h.prototype.start=function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,childList:!0,subtree:!0}),this.refresh())},h.prototype.stop=function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)},h.prototype.refresh=function(){if(this.started){for(var e=new Set(this.matchElementsInTree()),t=0,n=Array.from(this.elements);t<n.length;t++){var r=n[t];e.has(r)||this.removeElement(r)}for(var o=0,i=Array.from(e);o<i.length;o++)r=i[o],this.addElement(r)}},h.prototype.processMutations=function(e){if(this.started)for(var t=0,n=e;t<n.length;t++){var r=n[t];this.processMutation(r)}},h.prototype.processMutation=function(e){"attributes"==e.type?this.processAttributeChange(e.target,e.attributeName):"childList"==e.type&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))},h.prototype.processAttributeChange=function(e,t){var n=e;this.elements.has(n)?this.delegate.elementAttributeChanged&&this.matchElement(n)?this.delegate.elementAttributeChanged(n,t):this.removeElement(n):this.matchElement(n)&&this.addElement(n)},h.prototype.processRemovedNodes=function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t],o=this.elementFromNode(r);o&&this.processTree(o,this.removeElement)}},h.prototype.processAddedNodes=function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t],o=this.elementFromNode(r);o&&this.elementIsActive(o)&&this.processTree(o,this.addElement)}},h.prototype.matchElement=function(e){return this.delegate.matchElement(e)},h.prototype.matchElementsInTree=function(e){return void 0===e&&(e=this.element),this.delegate.matchElementsInTree(e)},h.prototype.processTree=function(e,t){for(var n=0,r=this.matchElementsInTree(e);n<r.length;n++){var o=r[n];t.call(this,o)}},h.prototype.elementFromNode=function(e){if(e.nodeType==Node.ELEMENT_NODE)return e},h.prototype.elementIsActive=function(e){return e.isConnected==this.element.isConnected&&this.element.contains(e)},h.prototype.addElement=function(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))},h.prototype.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))},h);function h(e,t){var n=this;this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(function(e){return n.processMutations(e)})}var m=(Object.defineProperty(y.prototype,"element",{get:function(){return this.elementObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"selector",{get:function(){return"["+this.attributeName+"]"},enumerable:!0,configurable:!0}),y.prototype.start=function(){this.elementObserver.start()},y.prototype.stop=function(){this.elementObserver.stop()},y.prototype.refresh=function(){this.elementObserver.refresh()},Object.defineProperty(y.prototype,"started",{get:function(){return this.elementObserver.started},enumerable:!0,configurable:!0}),y.prototype.matchElement=function(e){return e.hasAttribute(this.attributeName)},y.prototype.matchElementsInTree=function(e){var t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)},y.prototype.elementMatched=function(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)},y.prototype.elementUnmatched=function(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)},y.prototype.elementAttributeChanged=function(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)},y);function y(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new f(e,this)}function v(e,t,n){g(e,t).add(n)}function b(e,t,n){var r,o,i;g(e,t).delete(n),o=t,null!=(i=(r=e).get(o))&&0==i.size&&r.delete(o)}function g(e,t){var n=e.get(t);return n||(n=new Set,e.set(t,n)),n}var E=(Object.defineProperty(w.prototype,"values",{get:function(){return Array.from(this.valuesByKey.values()).reduce(function(e,t){return e.concat(Array.from(t))},[])},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"size",{get:function(){return Array.from(this.valuesByKey.values()).reduce(function(e,t){return e+t.size},0)},enumerable:!0,configurable:!0}),w.prototype.add=function(e,t){v(this.valuesByKey,e,t)},w.prototype.delete=function(e,t){b(this.valuesByKey,e,t)},w.prototype.has=function(e,t){var n=this.valuesByKey.get(e);return null!=n&&n.has(t)},w.prototype.hasKey=function(e){return this.valuesByKey.has(e)},w.prototype.hasValue=function(t){return Array.from(this.valuesByKey.values()).some(function(e){return e.has(t)})},w.prototype.getValuesForKey=function(e){var t=this.valuesByKey.get(e);return t?Array.from(t):[]},w.prototype.getKeysForValue=function(t){return Array.from(this.valuesByKey).filter(function(e){return e[0],e[1].has(t)}).map(function(e){var t=e[0];return e[1],t})},w);function w(){this.valuesByKey=new Map}var O,x;(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(A,x=E),Object.defineProperty(A.prototype,"values",{get:function(){return Array.from(this.keysByValue.keys())},enumerable:!0,configurable:!0}),A.prototype.add=function(e,t){x.prototype.add.call(this,e,t),v(this.keysByValue,t,e)},A.prototype.delete=function(e,t){x.prototype.delete.call(this,e,t),b(this.keysByValue,t,e)},A.prototype.hasValue=function(e){return this.keysByValue.has(e)},A.prototype.getKeysForValue=function(e){var t=this.keysByValue.get(e);return t?Array.from(t):[]};function A(){var e=x.call(this)||this;return e.keysByValue=new Map,e}var k=(Object.defineProperty(j.prototype,"started",{get:function(){return this.attributeObserver.started},enumerable:!0,configurable:!0}),j.prototype.start=function(){this.attributeObserver.start()},j.prototype.stop=function(){this.attributeObserver.stop()},j.prototype.refresh=function(){this.attributeObserver.refresh()},Object.defineProperty(j.prototype,"element",{get:function(){return this.attributeObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"attributeName",{get:function(){return this.attributeObserver.attributeName},enumerable:!0,configurable:!0}),j.prototype.elementMatchedAttribute=function(e){this.tokensMatched(this.readTokensForElement(e))},j.prototype.elementAttributeValueChanged=function(e){var t=this.refreshTokensForElement(e),n=t[0],r=t[1];this.tokensUnmatched(n),this.tokensMatched(r)},j.prototype.elementUnmatchedAttribute=function(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))},j.prototype.tokensMatched=function(e){var t=this;e.forEach(function(e){return t.tokenMatched(e)})},j.prototype.tokensUnmatched=function(e){var t=this;e.forEach(function(e){return t.tokenUnmatched(e)})},j.prototype.tokenMatched=function(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)},j.prototype.tokenUnmatched=function(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)},j.prototype.refreshTokensForElement=function(e){var n,r,t,o=this.tokensByElement.getValuesForKey(e),i=this.readTokensForElement(e),s=(n=o,r=i,t=Math.max(n.length,r.length),Array.from({length:t},function(e,t){return[n[t],r[t]]}).findIndex(function(e){var t,n,r=e[0],o=e[1];return n=o,!((t=r)&&n&&t.index==n.index&&t.content==n.content)}));return-1==s?[[],[]]:[o.slice(s),i.slice(s)]},j.prototype.readTokensForElement=function(e){var n,r,t=this.attributeName,o=e.getAttribute(t)||"";return n=e,r=t,o.trim().split(/\s+/).filter(function(e){return e.length}).map(function(e,t){return{element:n,attributeName:r,content:e,index:t}})},j);function j(e,t,n){this.attributeObserver=new m(e,t,this),this.delegate=n,this.tokensByElement=new E}var _=(Object.defineProperty(P.prototype,"started",{get:function(){return this.tokenListObserver.started},enumerable:!0,configurable:!0}),P.prototype.start=function(){this.tokenListObserver.start()},P.prototype.stop=function(){this.tokenListObserver.stop()},P.prototype.refresh=function(){this.tokenListObserver.refresh()},Object.defineProperty(P.prototype,"element",{get:function(){return this.tokenListObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"attributeName",{get:function(){return this.tokenListObserver.attributeName},enumerable:!0,configurable:!0}),P.prototype.tokenMatched=function(e){var t=e.element,n=this.fetchParseResultForToken(e).value;n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))},P.prototype.tokenUnmatched=function(e){var t=e.element,n=this.fetchParseResultForToken(e).value;n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))},P.prototype.fetchParseResultForToken=function(e){var t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t},P.prototype.fetchValuesByTokenForElement=function(e){var t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t},P.prototype.parseToken=function(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(e){return{error:e}}},P);function P(e,t,n){this.tokenListObserver=new k(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}var C=(T.prototype.start=function(){this.valueListObserver||(this.valueListObserver=new _(this.element,this.actionAttribute,this),this.valueListObserver.start())},T.prototype.stop=function(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())},Object.defineProperty(T.prototype,"element",{get:function(){return this.context.element},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"actionAttribute",{get:function(){return this.schema.actionAttribute},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"schema",{get:function(){return this.context.schema},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"bindings",{get:function(){return Array.from(this.bindingsByAction.values())},enumerable:!0,configurable:!0}),T.prototype.connectAction=function(e){var t=new p(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)},T.prototype.disconnectAction=function(e){var t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))},T.prototype.disconnectAllActions=function(){var t=this;this.bindings.forEach(function(e){return t.delegate.bindingDisconnected(e)}),this.bindingsByAction.clear()},T.prototype.parseValueForToken=function(e){var t=a.forToken(e);if(t.identifier==this.identifier)return t},T.prototype.elementMatchedValue=function(e,t){this.connectAction(t)},T.prototype.elementUnmatchedValue=function(e,t){this.disconnectAction(t)},T);function T(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}var L=(S.prototype.connect=function(){this.bindingObserver.start();try{this.controller.connect()}catch(e){this.handleError(e,"connecting controller")}},S.prototype.disconnect=function(){try{this.controller.disconnect()}catch(e){this.handleError(e,"disconnecting controller")}this.bindingObserver.stop()},Object.defineProperty(S.prototype,"application",{get:function(){return this.module.application},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"identifier",{get:function(){return this.module.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"schema",{get:function(){return this.application.schema},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"dispatcher",{get:function(){return this.application.dispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"parentElement",{get:function(){return this.element.parentElement},enumerable:!0,configurable:!0}),S.prototype.handleError=function(e,t,n){void 0===n&&(n={});var r=this.identifier,o=this.controller,i=this.element;n=Object.assign({identifier:r,controller:o,element:i},n),this.application.handleError(e,"Error "+t,n)},S);function S(e,t){this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new C(this,this.dispatcher);try{this.controller.initialize()}catch(e){this.handleError(e,"initializing controller")}}var M,B=(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}M(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function N(e){return{identifier:e.identifier,controllerConstructor:(t=e.controllerConstructor,(n=D(t)).bless(),n)};var t,n}var D=function(){function e(t){function n(){var e=this&&this instanceof n?this.constructor:void 0;return Reflect.construct(t,arguments,e)}return n.prototype=Object.create(t.prototype,{constructor:{value:n}}),Reflect.setPrototypeOf(n,t),n}try{return(t=e(function(){this.a.call(this)})).prototype.a=function(){},new t,e}catch(e){return function(e){return B(t,n=e),t;function t(){return null!==n&&n.apply(this,arguments)||this}var n}}var t}(),F=(Object.defineProperty(I.prototype,"identifier",{get:function(){return this.definition.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"controllerConstructor",{get:function(){return this.definition.controllerConstructor},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"contexts",{get:function(){return Array.from(this.connectedContexts)},enumerable:!0,configurable:!0}),I.prototype.connectContextForScope=function(e){var t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()},I.prototype.disconnectContextForScope=function(e){var t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())},I.prototype.fetchContextForScope=function(e){var t=this.contextsByScope.get(e);return t||(t=new L(this,e),this.contextsByScope.set(e,t)),t},I);function I(e,t){this.application=e,this.definition=N(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}var V=(Object.defineProperty(H.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(H.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),H.prototype.get=function(e){return e=this.getFormattedKey(e),this.element.getAttribute(e)},H.prototype.set=function(e,t){return e=this.getFormattedKey(e),this.element.setAttribute(e,t),this.get(e)},H.prototype.has=function(e){return e=this.getFormattedKey(e),this.element.hasAttribute(e)},H.prototype.delete=function(e){return!!this.has(e)&&(e=this.getFormattedKey(e),this.element.removeAttribute(e),!0)},H.prototype.getFormattedKey=function(e){return"data-"+this.identifier+"-"+e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})},H);function H(e){this.scope=e}function R(e,t){return"["+e+'~="'+t+'"]'}var U=(Object.defineProperty(q.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(q.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(q.prototype,"schema",{get:function(){return this.scope.schema},enumerable:!0,configurable:!0}),q.prototype.has=function(e){return null!=this.find(e)},q.prototype.find=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.getSelectorForTargetNames(e);return this.scope.findElement(n)},q.prototype.findAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.getSelectorForTargetNames(e);return this.scope.findAllElements(n)},q.prototype.getSelectorForTargetNames=function(e){var t=this;return e.map(function(e){return t.getSelectorForTargetName(e)}).join(", ")},q.prototype.getSelectorForTargetName=function(e){var t=this.identifier+"."+e;return R(this.schema.targetAttribute,t)},q);function q(e){this.scope=e}var K=(W.prototype.findElement=function(e){return this.findAllElements(e)[0]},W.prototype.findAllElements=function(e){var t=this.element.matches(e)?[this.element]:[],n=this.filterElements(Array.from(this.element.querySelectorAll(e)));return t.concat(n)},W.prototype.filterElements=function(e){var t=this;return e.filter(function(e){return t.containsElement(e)})},W.prototype.containsElement=function(e){return e.closest(this.controllerSelector)===this.element},Object.defineProperty(W.prototype,"controllerSelector",{get:function(){return R(this.schema.controllerAttribute,this.identifier)},enumerable:!0,configurable:!0}),W);function W(e,t,n){this.schema=e,this.identifier=t,this.element=n,this.targets=new U(this),this.data=new V(this)}var z=(G.prototype.start=function(){this.valueListObserver.start()},G.prototype.stop=function(){this.valueListObserver.stop()},Object.defineProperty(G.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!0,configurable:!0}),G.prototype.parseValueForToken=function(e){var t=e.element,n=e.content,r=this.fetchScopesByIdentifierForElement(t),o=r.get(n);return o||(o=new K(this.schema,n,t),r.set(n,o)),o},G.prototype.elementMatchedValue=function(e,t){var n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),1==n&&this.delegate.scopeConnected(t)},G.prototype.elementUnmatchedValue=function(e,t){var n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),1==n&&this.delegate.scopeDisconnected(t))},G.prototype.fetchScopesByIdentifierForElement=function(e){var t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t},G);function G(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new _(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}var X=(Object.defineProperty(Y.prototype,"element",{get:function(){return this.application.element},enumerable:!0,configurable:!0}),Object.defineProperty(Y.prototype,"schema",{get:function(){return this.application.schema},enumerable:!0,configurable:!0}),Object.defineProperty(Y.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!0,configurable:!0}),Object.defineProperty(Y.prototype,"modules",{get:function(){return Array.from(this.modulesByIdentifier.values())},enumerable:!0,configurable:!0}),Object.defineProperty(Y.prototype,"contexts",{get:function(){return this.modules.reduce(function(e,t){return e.concat(t.contexts)},[])},enumerable:!0,configurable:!0}),Y.prototype.start=function(){this.scopeObserver.start()},Y.prototype.stop=function(){this.scopeObserver.stop()},Y.prototype.loadDefinition=function(e){this.unloadIdentifier(e.identifier);var t=new F(this.application,e);this.connectModule(t)},Y.prototype.unloadIdentifier=function(e){var t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)},Y.prototype.getContextForElementAndIdentifier=function(t,e){var n=this.modulesByIdentifier.get(e);if(n)return n.contexts.find(function(e){return e.element==t})},Y.prototype.handleError=function(e,t,n){this.application.handleError(e,t,n)},Y.prototype.scopeConnected=function(e){this.scopesByIdentifier.add(e.identifier,e);var t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)},Y.prototype.scopeDisconnected=function(e){this.scopesByIdentifier.delete(e.identifier,e);var t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)},Y.prototype.connectModule=function(t){this.modulesByIdentifier.set(t.identifier,t),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(function(e){return t.connectContextForScope(e)})},Y.prototype.disconnectModule=function(t){this.modulesByIdentifier.delete(t.identifier),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(function(e){return t.disconnectContextForScope(e)})},Y);function Y(e){this.application=e,this.scopeObserver=new z(this.element,this.schema,this),this.scopesByIdentifier=new E,this.modulesByIdentifier=new Map}var J={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target"},Z=function(i,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}o((c=c.apply(i,s||[])).next())})},$=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[0,s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Q=(ee.start=function(e,t){var n=new ee(e,t);return n.start(),n},ee.prototype.start=function(){return Z(this,void 0,void 0,function(){return $(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",e):e()})];case 1:return e.sent(),this.router.start(),this.dispatcher.start(),[2]}})})},ee.prototype.stop=function(){this.router.stop(),this.dispatcher.stop()},ee.prototype.register=function(e,t){this.load({identifier:e,controllerConstructor:t})},ee.prototype.load=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(Array.isArray(e)?e:[e].concat(n)).forEach(function(e){return t.router.loadDefinition(e)})},ee.prototype.unload=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(Array.isArray(e)?e:[e].concat(n)).forEach(function(e){return t.router.unloadIdentifier(e)})},Object.defineProperty(ee.prototype,"controllers",{get:function(){return this.router.contexts.map(function(e){return e.controller})},enumerable:!0,configurable:!0}),ee.prototype.getControllerForElementAndIdentifier=function(e,t){var n=this.router.getContextForElementAndIdentifier(e,t);return n?n.controller:null},ee.prototype.handleError=function(e,t,n){console.error("%s\n\n%o\n\n%o",t,e,n)},ee);function ee(e,t){void 0===e&&(e=document.documentElement),void 0===t&&(t=J),this.element=e,this.schema=t,this.dispatcher=new n(this),this.router=new X(this)}function te(e){var t,i=e.prototype;(t=function(e){var t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t}(e),Array.from(t.reduce(function(t,e){var n;return n=e.targets,(Array.isArray(n)?n:[]).forEach(function(e){return t.add(e)}),t},new Set))).forEach(function(t){var e,n,r,o;return n=i,(e={})[t+"Target"]={get:function(){var e=this.targets.find(t);if(e)return e;throw new Error('Missing target element "'+this.identifier+"."+t+'"')}},e[t+"Targets"]={get:function(){return this.targets.findAll(t)}},e["has"+((o=t).charAt(0).toUpperCase()+o.slice(1))+"Target"]={get:function(){return this.targets.has(t)}},r=e,void Object.keys(r).forEach(function(e){var t;e in n||(t=r[e],Object.defineProperty(n,e,t))})})}var ne=(re.bless=function(){te(this)},Object.defineProperty(re.prototype,"application",{get:function(){return this.context.application},enumerable:!0,configurable:!0}),Object.defineProperty(re.prototype,"scope",{get:function(){return this.context.scope},enumerable:!0,configurable:!0}),Object.defineProperty(re.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(re.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(re.prototype,"targets",{get:function(){return this.scope.targets},enumerable:!0,configurable:!0}),Object.defineProperty(re.prototype,"data",{get:function(){return this.scope.data},enumerable:!0,configurable:!0}),re.prototype.initialize=function(){},re.prototype.connect=function(){},re.prototype.disconnect=function(){},re.targets=[],re);function re(e){this.context=e}e.Application=Q,e.Context=L,e.Controller=ne,e.defaultSchema=J,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Popper={})}(this,function(e){"use strict";function _(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function j(e){if("[object Window]"===e.toString())return e;var t=e.ownerDocument;return t&&t.defaultView||window}function E(e){var t=j(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function P(e){return e instanceof j(e).Element||e instanceof Element}function w(e){return e instanceof j(e).HTMLElement||e instanceof HTMLElement}function l(e){return e?(e.nodeName||"").toLowerCase():null}function C(e){return((P(e)?e.ownerDocument:e.document)||window.document).documentElement}function O(e){return _(C(e)).left+E(e).scrollLeft}function x(e){return j(e).getComputedStyle(e)}function p(e){var t=x(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function A(e,t,n){void 0===n&&(n=!1);var r,o,i=C(t),s=_(e),a=w(t),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return!a&&(a||n)||("body"===l(t)&&!p(i)||(c=(r=t)!==j(r)&&w(r)?{scrollLeft:(o=r).scrollLeft,scrollTop:o.scrollTop}:E(r)),w(t)?((u=_(t)).x+=t.clientLeft,u.y+=t.clientTop):i&&(u.x=O(i))),{x:s.left+c.scrollLeft-u.x,y:s.top+c.scrollTop-u.y,width:s.width,height:s.height}}function ee(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function d(e){return"html"===l(e)?e:e.assignedSlot||e.parentNode||e.host||C(e)}function k(e,t){void 0===t&&(t=[]);var n=function e(t){return 0<=["html","body","#document"].indexOf(l(t))?t.ownerDocument.body:w(t)&&p(t)?t:e(d(t))}(e),r="body"===l(n),o=j(n),i=r?[o].concat(o.visualViewport||[],p(n)?n:[]):n,s=t.concat(i);return r?s:s.concat(k(d(i)))}function r(e){if(!w(e)||"fixed"===x(e).position)return null;var t=e.offsetParent;if(t){var n=C(t);if("body"===l(t)&&"static"===x(t).position&&"static"!==x(n).position)return n}return t}function te(e){for(var t=j(e),n=r(e);n&&0<=["table","td","th"].indexOf(l(n))&&"static"===x(n).position;)n=r(n);return(!n||"body"!==l(n)||"static"!==x(n).position)&&(n||function(e){for(var t=d(e);w(t)&&["html","body"].indexOf(l(t))<0;){var n=x(t);if("none"!==n.transform||"none"!==n.perspective||n.willChange&&"auto"!==n.willChange)return t;t=t.parentNode}return null}(e))||t}var ne="top",re="bottom",oe="right",ie="left",D="auto",F=[ne,re,oe,ie],se="start",f="end",T="clippingParents",L="viewport",S="popper",M="reference",I=F.reduce(function(e,t){return e.concat([t+"-"+se,t+"-"+f])},[]),V=[].concat(F,[D]).reduce(function(e,t){return e.concat([t,t+"-"+se,t+"-"+f])},[]),B=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function N(e){var r=new Map,o=new Set,t=[];return e.forEach(function(e){r.set(e.name,e)}),e.forEach(function(e){o.has(e.name)||!function n(e){o.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){var t;o.has(e)||(t=r.get(e))&&n(t)}),t.push(e)}(e)}),t}function H(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return[].concat(n).reduce(function(e,t){return e.replace(/%s/,t)},e)}var R='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',U='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',q=["name","enabled","phase","fn","effect","requires","options"];function ae(e){return e.split("-")[0]}function h(e,t){var n,r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&((n=r)instanceof j(n).ShadowRoot||n instanceof ShadowRoot)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function K(e){return Object.assign(Object.assign({},e),{},{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function m(e,t){return t===L?K((f=j(d=e),h=C(d),m=f.visualViewport,y=h.clientWidth,v=h.clientHeight,g=b=0,m&&(y=m.width,v=m.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(b=m.offsetLeft,g=m.offsetTop)),{width:y,height:v,x:b+O(d),y:g})):w(t)?((p=_(l=t)).top=p.top+l.clientTop,p.left=p.left+l.clientLeft,p.bottom=p.top+l.clientHeight,p.right=p.left+l.clientWidth,p.width=l.clientWidth,p.height=l.clientHeight,p.x=p.left,p.y=p.top,p):K((n=C(e),r=C(n),o=E(n),i=n.ownerDocument.body,s=Math.max(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Math.max(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),c=-o.scrollLeft+O(n),u=-o.scrollTop,"rtl"===x(i||r).direction&&(c+=Math.max(r.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:c,y:u}));var n,r,o,i,s,a,c,u,l,p,d,f,h,m,y,v,b,g}function W(r,e,t){var n,o,i,s="clippingParents"===e?(o=k(d(n=r)),P(i=0<=["absolute","fixed"].indexOf(x(n).position)&&w(n)?te(n):n)?o.filter(function(e){return P(e)&&h(e,i)&&"body"!==l(e)}):[]):[].concat(e),a=[].concat(s,[t]),c=a[0],u=a.reduce(function(e,t){var n=m(r,t);return e.top=Math.max(n.top,e.top),e.right=Math.min(n.right,e.right),e.bottom=Math.min(n.bottom,e.bottom),e.left=Math.max(n.left,e.left),e},m(r,c));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function ce(e){return e.split("-")[1]}function ue(e){return 0<=["top","bottom"].indexOf(e)?"x":"y"}function z(e){var t,n=e.reference,r=e.element,o=e.placement,i=o?ae(o):null,s=o?ce(o):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(i){case ne:t={x:a,y:n.y-r.height};break;case re:t={x:a,y:n.y+n.height};break;case oe:t={x:n.x+n.width,y:c};break;case ie:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var u=i?ue(i):null;if(null!=u){var l="y"===u?"height":"width";switch(s){case se:t[u]=t[u]-(n[l]/2-r[l]/2);break;case f:t[u]=t[u]+(n[l]/2-r[l]/2)}}return t}function le(){return{top:0,right:0,bottom:0,left:0}}function G(e){return Object.assign(Object.assign({},le()),e)}function X(n,e){return e.reduce(function(e,t){return e[t]=n,e},{})}function pe(e,t){void 0===t&&(t={});var r,n=t.placement,o=void 0===n?e.placement:n,i=t.boundary,s=void 0===i?T:i,a=t.rootBoundary,c=void 0===a?L:a,u=t.elementContext,l=void 0===u?S:u,p=t.altBoundary,d=void 0!==p&&p,f=t.padding,h=void 0===f?0:f,m=G("number"!=typeof h?h:X(h,F)),y=l===S?M:S,v=e.elements.reference,b=e.rects.popper,g=e.elements[d?y:l],E=W(P(g)?g:g.contextElement||C(e.elements.popper),s,c),w=_(v),O=z({reference:w,element:b,strategy:"absolute",placement:o}),x=K(Object.assign(Object.assign({},b),O)),A=l===S?x:w,k={top:E.top-A.top+m.top,bottom:A.bottom-E.bottom+m.bottom,left:E.left-A.left+m.left,right:A.right-E.right+m.right},j=e.modifiersData.offset;return l===S&&j&&(r=j[o],Object.keys(k).forEach(function(e){var t=0<=[oe,re].indexOf(e)?1:-1,n=0<=[ne,re].indexOf(e)?"y":"x";k[e]+=r[n]*t})),k}var Y="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",o={placement:"bottom",modifiers:[],strategy:"absolute"};function J(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function t(e){void 0===e&&(e={});var t=e.defaultModifiers,b=void 0===t?[]:t,n=e.defaultOptions,g=void 0===n?o:n;return function(d,f,t){void 0===t&&(t=g);var n,r,h={placement:"bottom",orderedModifiers:[],options:Object.assign(Object.assign({},o),g),modifiersData:{},elements:{reference:d,popper:f},attributes:{},styles:{}},m=[],l=!1,y={state:h,setOptions:function(e){v(),h.options=Object.assign(Object.assign(Object.assign({},g),h.options),e),h.scrollParents={reference:P(d)?k(d):d.contextElement?k(d.contextElement):[],popper:k(f)};var t,n,r,o,i=(r=[].concat(b,h.options.modifiers),o=r.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign(Object.assign(Object.assign({},n),t),{},{options:Object.assign(Object.assign({},n.options),t.options),data:Object.assign(Object.assign({},n.data),t.data)}):t,e},{}),t=Object.keys(o).map(function(e){return o[e]}),n=N(t),B.reduce(function(e,t){return e.concat(n.filter(function(e){return e.phase===t}))},[]));h.orderedModifiers=i.filter(function(e){return e.enabled});var s=(c=[].concat(i,h.options.modifiers),u=function(e){return e.name},l=new Set,c.filter(function(e){var t=u(e);if(!l.has(t))return l.add(t),!0}));(a=s).forEach(function(n){Object.keys(n).forEach(function(e){switch(e){case"name":"string"!=typeof n.name&&console.error(H(R,String(n.name),'"name"','"string"','"'+String(n.name)+'"'));break;case"enabled":"boolean"!=typeof n.enabled&&console.error(H(R,n.name,'"enabled"','"boolean"','"'+String(n.enabled)+'"'));case"phase":B.indexOf(n.phase)<0&&console.error(H(R,n.name,'"phase"',"either "+B.join(", "),'"'+String(n.phase)+'"'));break;case"fn":"function"!=typeof n.fn&&console.error(H(R,n.name,'"fn"','"function"','"'+String(n.fn)+'"'));break;case"effect":"function"!=typeof n.effect&&console.error(H(R,n.name,'"effect"','"function"','"'+String(n.fn)+'"'));break;case"requires":Array.isArray(n.requires)||console.error(H(R,n.name,'"requires"','"array"','"'+String(n.requires)+'"'));break;case"requiresIfExists":Array.isArray(n.requiresIfExists)||console.error(H(R,n.name,'"requiresIfExists"','"array"','"'+String(n.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+n.name+'" modifier, valid properties are '+q.map(function(e){return'"'+e+'"'}).join(", ")+'; but "'+e+'" was provided.')}n.requires&&n.requires.forEach(function(t){null==a.find(function(e){return e.name===t})&&console.error(H(U,String(n.name),t,t))})})}),ae(h.options.placement)===D&&(h.orderedModifiers.find(function(e){return"flip"===e.name})||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" ")));var a,c,u,l,p=x(f);return[p.marginTop,p.marginRight,p.marginBottom,p.marginLeft].some(function(e){return parseFloat(e)})&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" ")),h.orderedModifiers.forEach(function(e){var t,n=e.name,r=e.options,o=void 0===r?{}:r,i=e.effect;"function"==typeof i&&(t=i({state:h,name:n,instance:y,options:o}),m.push(t||function(){}))}),y.update()},forceUpdate:function(){if(!l){var e=h.elements,t=e.reference,n=e.popper;if(J(t,n)){h.rects={reference:A(t,te(n),"fixed"===h.options.strategy),popper:ee(n)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(e){return h.modifiersData[e.name]=Object.assign({},e.data)});for(var r,o,i,s,a,c=0,u=0;u<h.orderedModifiers.length;u++){if(100<(c+=1)){console.error("Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.");break}!0!==h.reset?(o=(r=h.orderedModifiers[u]).fn,s=void 0===(i=r.options)?{}:i,a=r.name,"function"==typeof o&&(h=o({state:h,options:s,name:a,instance:y})||h)):(h.reset=!1,u=-1)}}else console.error(Y)}},update:(n=function(){return new Promise(function(e){y.forceUpdate(),e(h)})},function(){return r=r||new Promise(function(e){Promise.resolve().then(function(){r=void 0,e(n())})})}),destroy:function(){v(),l=!0}};if(!J(d,f))return console.error(Y),y;function v(){m.forEach(function(e){return e()}),m=[]}return y.setOptions(t).then(function(e){!l&&t.onFirstUpdate&&t.onFirstUpdate(e)}),y}}var y={passive:!0};var n={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=void 0===o||o,s=r.resize,a=void 0===s||s,c=j(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&u.forEach(function(e){e.addEventListener("scroll",n.update,y)}),a&&c.addEventListener("resize",n.update,y),function(){i&&u.forEach(function(e){e.removeEventListener("scroll",n.update,y)}),a&&c.removeEventListener("resize",n.update,y)}},data:{}};var i={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=z({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Z={top:"auto",right:"auto",bottom:"auto",left:"auto"};function v(e){var t,n,r,o,i,s,a=e.popper,c=e.popperRect,u=e.placement,l=e.offsets,p=e.position,d=e.gpuAcceleration,f=e.adaptive,h=e.roundOffsets?(r=(n=l).x,o=n.y,i=window.devicePixelRatio||1,{x:Math.round(r*i)/i||0,y:Math.round(o*i)/i||0}):l,m=h.x,y=void 0===m?0:m,v=h.y,b=void 0===v?0:v,g=l.hasOwnProperty("x"),E=l.hasOwnProperty("y"),w=ie,O=ne,x=window;f&&((s=te(a))===j(a)&&(s=C(a)),u===ne&&(O=re,b-=s.clientHeight-c.height,b*=d?1:-1),u===ie&&(w=oe,y-=s.clientWidth-c.width,y*=d?1:-1));var A,k=Object.assign({position:p},f&&Z);return d?Object.assign(Object.assign({},k),{},((A={})[O]=E?"0":"",A[w]=g?"0":"",A.transform=(x.devicePixelRatio||1)<2?"translate("+y+"px, "+b+"px)":"translate3d("+y+"px, "+b+"px, 0)",A)):Object.assign(Object.assign({},k),{},((t={})[O]=E?b+"px":"",t[w]=g?y+"px":"",t.transform="",t))}var s={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,i=n.adaptive,s=void 0===i||i,a=n.roundOffsets,c=void 0===a||a,u=x(t.elements.popper).transitionProperty||"";s&&["transform","top","right","bottom","left"].some(function(e){return 0<=u.indexOf(e)})&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',"\n\n",'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.","\n\n","We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "));var l={placement:ae(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign(Object.assign({},t.styles.popper),v(Object.assign(Object.assign({},l),{},{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign(Object.assign({},t.styles.arrow),v(Object.assign(Object.assign({},l),{},{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-placement":t.placement})},data:{}};var a={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var o=e.state;Object.keys(o.elements).forEach(function(e){var t=o.styles[e]||{},n=o.attributes[e]||{},r=o.elements[e];w(r)&&l(r)&&(Object.assign(r.style,t),Object.keys(n).forEach(function(e){var t=n[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var o=e.state,i={popper:{position:o.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(o.elements.popper.style,i.popper),o.elements.arrow&&Object.assign(o.elements.arrow.style,i.arrow),function(){Object.keys(o.elements).forEach(function(e){var t=o.elements[e],n=o.attributes[e]||{},r=Object.keys(o.styles.hasOwnProperty(e)?o.styles[e]:i[e]).reduce(function(e,t){return e[t]="",e},{});w(t)&&l(t)&&(Object.assign(t.style,r),Object.keys(n).forEach(function(e){t.removeAttribute(e)}))})}},requires:["computeStyles"]};var c={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var l=e.state,t=e.options,n=e.name,r=t.offset,p=void 0===r?[0,0]:r,o=V.reduce(function(e,t){var n,r,o,i,s,a,c,u;return e[t]=(n=t,r=l.rects,o=p,i=ae(n),s=0<=[ie,ne].indexOf(i)?-1:1,a="function"==typeof o?o(Object.assign(Object.assign({},r),{},{placement:n})):o,c=(c=a[0])||0,u=((u=a[1])||0)*s,0<=[ie,oe].indexOf(i)?{x:u,y:c}:{x:c,y:u}),e},{}),i=o[l.placement],s=i.x,a=i.y;null!=l.modifiersData.popperOffsets&&(l.modifiersData.popperOffsets.x+=s,l.modifiersData.popperOffsets.y+=a),l.modifiersData[n]=o}},u={left:"right",right:"left",bottom:"top",top:"bottom"};function $(e){return e.replace(/left|right|bottom|top/g,function(e){return u[e]})}var b={start:"end",end:"start"};function Q(e){return e.replace(/start|end/g,function(e){return b[e]})}var g={name:"flip",enabled:!0,phase:"main",fn:function(e){var n=e.state,t=e.options,r=e.name;if(!n.modifiersData[r]._skip){for(var o=t.mainAxis,i=void 0===o||o,s=t.altAxis,a=void 0===s||s,c=t.fallbackPlacements,u=t.padding,l=t.boundary,p=t.rootBoundary,d=t.altBoundary,f=t.flipVariations,h=void 0===f||f,m=t.allowedAutoPlacements,y=n.options.placement,v=ae(y),b=c||(v===y||!h?[$(y)]:function(e){if(ae(e)===D)return[];var t=$(e);return[Q(e),t,Q(t)]}(y)),g=[y].concat(b).reduce(function(e,t){return e.concat(ae(t)===D?function(n,e){void 0===e&&(e={});var t=e.placement,r=e.boundary,o=e.rootBoundary,i=e.padding,s=e.flipVariations,a=e.allowedAutoPlacements,c=void 0===a?V:a,u=ce(t),l=u?s?I:I.filter(function(e){return ce(e)===u}):F,p=l.filter(function(e){return 0<=c.indexOf(e)});0===p.length&&(p=l,console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" ")));var d=p.reduce(function(e,t){return e[t]=pe(n,{placement:t,boundary:r,rootBoundary:o,padding:i})[ae(t)],e},{});return Object.keys(d).sort(function(e,t){return d[e]-d[t]})}(n,{placement:t,boundary:l,rootBoundary:p,padding:u,flipVariations:h,allowedAutoPlacements:m}):t)},[]),E=n.rects.reference,w=n.rects.popper,O=new Map,x=!0,A=g[0],k=0;k<g.length;k++){var j=g[k],_=ae(j),P=ce(j)===se,C=0<=[ne,re].indexOf(_),T=C?"width":"height",L=pe(n,{placement:j,boundary:l,rootBoundary:p,altBoundary:d,padding:u}),S=C?P?oe:ie:P?re:ne;E[T]>w[T]&&(S=$(S));var M=$(S),B=[];if(i&&B.push(L[_]<=0),a&&B.push(L[S]<=0,L[M]<=0),B.every(function(e){return e})){A=j,x=!1;break}O.set(j,B)}if(x)for(var N=h?3:1;0<N;N--){if("break"===function(n){var e=g.find(function(e){var t=O.get(e);if(t)return t.slice(0,n).every(function(e){return e})});if(e)return A=e,"break"}(N))break}n.placement!==A&&(n.modifiersData[r]._skip=!0,n.placement=A,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function de(e,t,n){return Math.max(e,Math.min(t,n))}var fe={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t,n,r,o,i,s,a,c,u,l,p,d,f,h,m,y,v,b,g,E,w,O,x,A,k,j,_,P=e.state,C=e.options,T=e.name,L=C.mainAxis,S=void 0===L||L,M=C.altAxis,B=void 0!==M&&M,N=C.boundary,D=C.rootBoundary,F=C.altBoundary,I=C.padding,V=C.tether,H=void 0===V||V,R=C.tetherOffset,U=void 0===R?0:R,q=pe(P,{boundary:N,rootBoundary:D,padding:I,altBoundary:F}),K=ae(P.placement),W=ce(P.placement),z=!W,G=ue(K),X="x"===G?"y":"x",Y=P.modifiersData.popperOffsets,J=P.rects.reference,Z=P.rects.popper,$="function"==typeof U?U(Object.assign(Object.assign({},P.rects),{},{placement:P.placement})):U,Q={x:0,y:0};Y&&(S&&(t="y"===G?ne:ie,n="y"===G?re:oe,r="y"===G?"height":"width",o=Y[G],i=Y[G]+q[t],s=Y[G]-q[n],a=H?-Z[r]/2:0,c=W===se?J[r]:Z[r],u=W===se?-Z[r]:-J[r],l=P.elements.arrow,p=H&&l?ee(l):{width:0,height:0},f=(d=P.modifiersData["arrow#persistent"]?P.modifiersData["arrow#persistent"].padding:le())[t],h=d[n],m=de(0,J[r],p[r]),y=z?J[r]/2-a-m-f-$:c-m-f-$,v=z?-J[r]/2+a+m+h+$:u+m+h+$,g=(b=P.elements.arrow&&te(P.elements.arrow))?"y"===G?b.clientTop||0:b.clientLeft||0:0,E=P.modifiersData.offset?P.modifiersData.offset[P.placement][G]:0,w=Y[G]+y-E-g,O=Y[G]+v-E,x=de(H?Math.min(i,w):i,o,H?Math.max(s,O):s),Y[G]=x,Q[G]=x-o),B&&(A="x"===G?ne:ie,k="x"===G?re:oe,_=de((j=Y[X])+q[A],j,j-q[k]),Y[X]=_,Q[X]=_-j),P.modifiersData[T]=Q)},requiresIfExists:["offset"]};var he={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n,r,o,i,s,a,c,u,l,p,d,f,h,m=e.state,y=e.name,v=m.elements.arrow,b=m.modifiersData.popperOffsets,g=ae(m.placement),E=ue(g),w=0<=[ie,oe].indexOf(g)?"height":"width";v&&b&&(n=m.modifiersData[y+"#persistent"].padding,r=ee(v),o="y"===E?ne:ie,i="y"===E?re:oe,s=m.rects.reference[w]+m.rects.reference[E]-b[E]-m.rects.popper[w],a=b[E]-m.rects.reference[E],u=(c=te(v))?"y"===E?c.clientHeight||0:c.clientWidth||0:0,l=s/2-a/2,p=n[o],d=u-r[w]-n[i],h=de(p,f=u/2-r[w]/2+l,d),m.modifiersData[y]=((t={})[E]=h,t.centerOffset=h-f,t))},effect:function(e){var t=e.state,n=e.options,r=e.name,o=n.element,i=void 0===o?"[data-popper-arrow]":o,s=n.padding,a=void 0===s?0:s;null!=i&&("string"==typeof i&&!(i=t.elements.popper.querySelector(i))||(w(i)||console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" ")),h(t.elements.popper,i)?(t.elements.arrow=i,t.modifiersData[r+"#persistent"]={padding:G("number"!=typeof a?a:X(a,F))}):console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" "))))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function me(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ye(t){return[ne,oe,re,ie].some(function(e){return 0<=t[e]})}var ve={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,s=pe(t,{elementContext:"reference"}),a=pe(t,{altBoundary:!0}),c=me(s,r),u=me(a,o,i),l=ye(c),p=ye(u);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:p},t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-reference-hidden":l,"data-popper-escaped":p})}},be=t({defaultModifiers:[n,i,s,a]}),ge=[n,i,s,a,c,g,fe,he,ve],Ee=t({defaultModifiers:ge});e.applyStyles=a,e.arrow=he,e.computeStyles=s,e.createPopper=Ee,e.createPopperLite=be,e.defaultModifiers=ge,e.detectOverflow=pe,e.eventListeners=n,e.flip=g,e.hide=ve,e.offset=c,e.popperGenerator=t,e.popperOffsets=i,e.preventOverflow=fe,Object.defineProperty(e,"__esModule",{value:!0})}),function(e){("object"!=typeof exports||"undefined"==typeof module)&&"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function e(t){var o=!0,n=!1,r=null,i={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function s(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function a(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function e(e){o=!1}function c(){document.addEventListener("mousemove",u),document.addEventListener("mousedown",u),document.addEventListener("mouseup",u),document.addEventListener("pointermove",u),document.addEventListener("pointerdown",u),document.addEventListener("pointerup",u),document.addEventListener("touchmove",u),document.addEventListener("touchstart",u),document.addEventListener("touchend",u)}function u(e){e.target.nodeName&&"html"===e.target.nodeName.toLowerCase()||(o=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mousedown",u),document.removeEventListener("mouseup",u),document.removeEventListener("pointermove",u),document.removeEventListener("pointerdown",u),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",u),document.removeEventListener("touchstart",u),document.removeEventListener("touchend",u))}document.addEventListener("keydown",function(e){e.metaKey||e.altKey||e.ctrlKey||(s(t.activeElement)&&a(t.activeElement),o=!0)},!0),document.addEventListener("mousedown",e,!0),document.addEventListener("pointerdown",e,!0),document.addEventListener("touchstart",e,!0),document.addEventListener("visibilitychange",function(e){"hidden"===document.visibilityState&&(n&&(o=!0),c())},!0),c(),t.addEventListener("focus",function(e){var t,n,r;s(e.target)&&(o||(t=e.target,n=t.type,"INPUT"===(r=t.tagName)&&i[n]&&!t.readOnly||"TEXTAREA"===r&&!t.readOnly||t.isContentEditable))&&a(e.target)},!0),t.addEventListener("blur",function(e){var t;s(e.target)&&(e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(n=!0,window.clearTimeout(r),r=window.setTimeout(function(){n=!1},100),(t=e.target).hasAttribute("data-focus-visible-added")&&(t.classList.remove("focus-visible"),t.removeAttribute("data-focus-visible-added")))},!0),t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host?t.host.setAttribute("data-js-focus-visible",""):t.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var t;window.applyFocusVisiblePolyfill=e;try{t=new CustomEvent("focus-visible-polyfill-ready")}catch(e){(t=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(t)}"undefined"!=typeof document&&e(document)});var __extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),__spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r};!function(c){var u,e=(u=Stimulus.Application,__extends(r,u),r.prototype.load=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=Array.isArray(e)?e:__spreadArrays([e],t),o=0,i=r;o<i.length;o++){var s=i[o],a=/^s-/.test(s.identifier);if(c._initializing&&!a)throw'Stacks-created Stimulus controller names must start with "s-".';if(!c._initializing&&a)throw'The "s-" prefix on Stimulus controller names is reserved for Stacks-created controllers.'}u.prototype.load.call(this,r)},r.start=function(e,t){var n=new r(e,t);return n.start(),n},r);function r(){return null!==u&&u.apply(this,arguments)||this}c.application=e.start(),c._initializing=!0;var t,l=(t=Stimulus.Controller,__extends(n,t),n.prototype.getElementData=function(e,t){return e.getAttribute("data-"+this.identifier+"-"+t)},n.prototype.setElementData=function(e,t,n){e.setAttribute("data-"+this.identifier+"-"+t,n)},n.prototype.removeElementData=function(e,t){e.removeAttribute("data-"+this.identifier+"-"+t)},n.prototype.triggerEvent=function(e,t,n){var r,o=this.identifier+":"+e;try{r=new CustomEvent(o,{bubbles:!0,cancelable:!0,detail:t})}catch(e){(r=document.createEvent("CustomEvent")).initCustomEvent(o,!0,!0,t)}return(n||this.element).dispatchEvent(r),r},n);function n(){return null!==t&&t.apply(this,arguments)||this}function o(e){var t,n,r,o=e.hasOwnProperty("targets")?(__extends(s,r=l),(t=s).targets=e.targets,t):(__extends(i,n=l),i);function i(){return null!==n&&n.apply(this,arguments)||this}function s(){return null!==r&&r.apply(this,arguments)||this}for(var a in e)"targets"!==a&&e.hasOwnProperty(a)&&Object.defineProperty(o.prototype,a,Object.getOwnPropertyDescriptor(e,a));return o}c.StacksController=l,c.createController=o,c.addController=function(e,t){c.application.register(e,o(t))}}(Stacks=Stacks||{});__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(){var r="s-expandable-control:radio-off";function t(n){var e=n.target;e instanceof HTMLInputElement&&"INPUT"===e.nodeName&&"radio"===e.type&&document.querySelectorAll('input[type="radio"][name="'+e.name+'"]').forEach(function(e){if(e!==n.target){var t;try{t=new Event(r)}catch(e){(t=document.createEvent("Event")).initEvent(r,!0,!0)}e.dispatchEvent(t)}})}var e,n=0;function o(e){e?1===++n&&document.body.addEventListener("change",t):0===--n&&document.body.removeEventListener("change",t)}function i(){return null!==e&&e.apply(this,arguments)||this}Stacks.application.register("s-expandable-control",(e=Stacks.StacksController,__extends(i,e),i.prototype.initialize=function(){"INPUT"===this.element.nodeName&&0<=["radio","checkbox"].indexOf(this.element.type)?(this.isCollapsed=this._isCollapsedForCheckable,this.events=["change",r],this.isCheckable=!0,this.isRadio="radio"===this.element.type):(this.isCollapsed=this._isCollapsedForClickable,this.events=["click","keydown"]),this.listener=this.listener.bind(this)},i.prototype._isCollapsedForClickable=function(){var e=this.controlledCollapsible;return e?!e.classList.contains("is-expanded"):"false"===this.element.getAttribute("aria-expanded")},i.prototype._isCollapsedForCheckable=function(){return!this.element.checked},Object.defineProperty(i.prototype,"controlledCollapsible",{get:function(){var e=this.element.getAttribute("aria-controls");if(!e)throw"couldn't find controls";var t=document.getElementById(e);if(!t)throw"couldn't find controls";return t},enumerable:!1,configurable:!0}),i.prototype._dispatchShowHideEvent=function(e){this.triggerEvent(e?"show":"hide")},i.prototype._toggleClass=function(t){if(this.data.has("toggle-class")){var n=this.element.classList,e=this.data.get("toggle-class");if(!e)throw"couldn't find toggle class";e.split(/\s+/).forEach(function(e){n.toggle(e,!!t)})}},i.prototype.listener=function(e){var t;if(this.isCheckable)t=!this.element.checked;else{if("keydown"==e.type&&e instanceof KeyboardEvent&&13!=e.keyCode&&32!=e.keyCode)return;if(e.target!==e.currentTarget&&0<=["A","BUTTON"].indexOf(e.target.nodeName))return;t="true"===this.element.getAttribute("aria-expanded"),e.preventDefault(),"click"===e.type&&this.element.blur()}this.element.setAttribute("aria-expanded",t?"false":"true"),this.controlledCollapsible.classList.toggle("is-expanded",!t),this._dispatchShowHideEvent(!t),this._toggleClass(!t)},i.prototype.connect=function(){var e,t,n=this;this.events.forEach(function(e){n.element.addEventListener(e,n.listener)},this),this.isRadio&&o(!0),this.element.setAttribute("aria-expanded",this.isCollapsed()?"false":"true"),this.isCheckable&&(!(e=this.controlledCollapsible)||(t=!this.isCollapsed())!==e.classList.contains("is-expanded")&&(e.classList.toggle("is-expanded",t),this._dispatchShowHideEvent(t),this._toggleClass(t)))},i.prototype.disconnect=function(){var t=this;this.events.forEach(function(e){t.element.removeEventListener(e,t.listener)},this),this.isRadio&&o(!1)},i))}();__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(r){var e,t=(e=r.StacksController,__extends(n,e),n.prototype.connect=function(){this.validate()},n.prototype.disconnect=function(){this.unbindDocumentEvents()},n.prototype.toggle=function(e){void 0===e&&(e=null),this._toggle(void 0,e)},n.prototype.show=function(e){void 0===e&&(e=null),this._toggle(!0,e)},n.prototype.hide=function(e){void 0===e&&(e=null),this._toggle(!1,e)},n.prototype.validate=function(){var e=this.data.get("return-element");if(e&&(this.returnElement=document.querySelector(e),!this.returnElement))throw"Unable to find element by return-element selector: "+e},n.prototype._toggle=function(e,t){var n=this;void 0===t&&(t=null);var r,o,i=e,s="false"===this.modalTarget.getAttribute("aria-hidden");void 0===i&&(i=!s),i&&s||!i&&!s||(r=this.getDispatcher(t),(o=this.triggerEvent(i?"show":"hide",{returnElement:this.returnElement,dispatcher:this.getDispatcher(r)})).defaultPrevented||(this.returnElement=o.detail.returnElement,this.modalTarget.setAttribute("aria-hidden",i?"false":"true"),i?this.bindDocumentEvents():(this.unbindDocumentEvents(),this.focusReturnElement(),this.removeModalOnHide()),void 0!==this.modalTarget.ontransitionend?this.modalTarget.addEventListener("transitionend",function(){n.triggerEvent(i?"shown":"hidden",{dispatcher:r})},{once:!0}):this.triggerEvent(i?"shown":"hidden",{dispatcher:r})))},n.prototype.focusReturnElement=function(){var e=this;this.returnElement&&this.modalTarget.addEventListener("s-modal:hidden",function(){e.returnElement&&document.body.contains(e.returnElement)&&e.returnElement.focus()},{once:!0})},n.prototype.removeModalOnHide=function(){var e=this;"true"===this.data.get("remove-when-hidden")&&this.modalTarget.addEventListener("s-modal:hidden",function(){e.element.remove()},{once:!0})},n.prototype.handleFocusableElements=function(){var t=this,e=Array.from(this.modalTarget.querySelectorAll("[href], input, select, textarea, button, [tabindex]")).filter(function(e){return e.matches(":not([disabled]):not([tabindex='-1'])")});if(e.length){var n=e[0];this.hasInitialFocusTarget&&(n=this.initialFocusTarget),this.modalTarget.addEventListener("s-modal:shown",function(){n&&document.body.contains(n)&&n.focus()},{once:!0});var r=e[0],o=e[e.length-1];return this._boundTabTrap=this._boundTabTrap||function(e){t.modalTarget.contains(e.target)||(e.preventDefault(),r.focus()),e.target==r&&9===e.keyCode&&e.shiftKey&&(e.preventDefault(),o.focus()),e.target!=o||9!==e.keyCode||e.shiftKey||(e.preventDefault(),r.focus())},document.addEventListener("keydown",this._boundTabTrap),n}},n.prototype.bindDocumentEvents=function(){this._boundClickFn=this._boundClickFn||this.hideOnOutsideClick.bind(this),this._boundKeypressFn=this._boundKeypressFn||this.hideOnEscapePress.bind(this),document.addEventListener("mousedown",this._boundClickFn),document.addEventListener("keyup",this._boundKeypressFn),this.handleFocusableElements()},n.prototype.unbindDocumentEvents=function(){document.removeEventListener("mousedown",this._boundClickFn),document.removeEventListener("keyup",this._boundKeypressFn),document.removeEventListener("keydown",this._boundTabTrap)},n.prototype.hideOnOutsideClick=function(e){var t=e.target;!this.modalTarget.querySelector(".s-modal--dialog").contains(t)&&document.body.contains(t)&&this._toggle(!1,e)},n.prototype.hideOnEscapePress=function(e){27===e.which&&"true"!==this.modalTarget.getAttribute("aria-hidden")&&this._toggle(!1,e)},n.prototype.getDispatcher=function(e){return void 0===e&&(e=null),e instanceof Event?e.target:e instanceof Element?e:this.element},n.targets=["modal","initialFocus"],n);function n(){return null!==e&&e.apply(this,arguments)||this}function o(e,t){var n=r.application.getControllerForElementAndIdentifier(e,"s-modal");if(!n)throw"Unable to get s-modal controller from element";t?n.show():n.hide()}r.ModalController=t,r.showModal=function(e){o(e,!0)},r.hideModal=function(e){o(e,!1)}}(Stacks=Stacks||{}),Stacks.application.register("s-modal",Stacks.ModalController);__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(e){var t,n=(t=e.StacksController,__extends(r,t),Object.defineProperty(r.prototype,"isVisible",{get:function(){var e=this.popoverElement;return!!e&&e.classList.contains("is-visible")},enumerable:!1,configurable:!0}),r.prototype.connect=function(){t.prototype.connect.call(this),this.validate(),this.isVisible&&this.initializePopper()},r.prototype.disconnect=function(){this.hide(),this.popper&&(this.popper.destroy(),this.popper=null),t.prototype.disconnect.call(this)},r.prototype.toggle=function(e){void 0===e&&(e=null),this.isVisible?this.hide(e):this.show(e)},r.prototype.show=function(e){var t;void 0===e&&(e=null),this.isVisible||(t=this.getDispatcher(e),this.triggerEvent("show",{dispatcher:t}).defaultPrevented||(this.popper||this.initializePopper(),this.popoverElement.classList.add("is-visible"),this.scheduleUpdate(),this.shown()))},r.prototype.hide=function(e){var t;void 0===e&&(e=null),this.isVisible&&(t=this.getDispatcher(e),this.triggerEvent("hide",{dispatcher:t}).defaultPrevented||(this.popoverElement.classList.remove("is-visible"),this.popper&&(this.popper.destroy(),this.popper=null),this.hidden()))},r.prototype.shown=function(e){void 0===e&&(e=null),this.bindDocumentEvents(),this.triggerEvent("shown",{dispatcher:e})},r.prototype.hidden=function(e){void 0===e&&(e=null),this.unbindDocumentEvents(),this.triggerEvent("hidden",{dispatcher:e})},r.prototype.generatePopover=function(){return null},r.prototype.initializePopper=function(){this.popper=Popper.createPopper(this.referenceElement,this.popoverElement,{placement:this.data.get("placement")||"bottom",modifiers:[{name:"offset",options:{offset:[0,10]}},{name:"arrow",options:{element:".s-popover--arrow"}}]})},r.prototype.validate=function(){var e=this.data.get("reference-selector");if(this.referenceElement=this.element,e&&(this.referenceElement=this.element.querySelector(e),!this.referenceElement))throw"Unable to find element by reference selector: "+e;var t=this.referenceElement.getAttribute(this.popoverSelectorAttribute),n=null;if(t){if(!(n=document.getElementById(t)))throw"["+this.popoverSelectorAttribute+'="{POPOVER_ID}"] required'}else n=this.generatePopover();if(!n)throw"unable to find or generate popover element";this.popoverElement=n},r.prototype.getDispatcher=function(e){return void 0===e&&(e=null),e instanceof Event?e.target:e instanceof Element?e:this.element},r.prototype.scheduleUpdate=function(){this.popper&&this.isVisible&&this.popper.update()},r);function r(){return null!==t&&t.apply(this,arguments)||this}e.BasePopoverController=n;var o,i=(__extends(s,o=n),s.prototype.shown=function(e){void 0===e&&(e=null),this.toggleOptionalClasses(!0),o.prototype.shown.call(this,e)},s.prototype.hidden=function(e){void 0===e&&(e=null),this.toggleOptionalClasses(!1),o.prototype.hidden.call(this,e)},s.prototype.bindDocumentEvents=function(){this.boundHideOnOutsideClick=this.boundHideOnOutsideClick||this.hideOnOutsideClick.bind(this),this.boundHideOnEscapePress=this.boundHideOnEscapePress||this.hideOnEscapePress.bind(this),document.addEventListener("mousedown",this.boundHideOnOutsideClick),document.addEventListener("keyup",this.boundHideOnEscapePress)},s.prototype.unbindDocumentEvents=function(){document.removeEventListener("mousedown",this.boundHideOnOutsideClick),document.removeEventListener("keyup",this.boundHideOnEscapePress)},s.prototype.hideOnOutsideClick=function(e){var t=e.target;this.referenceElement.contains(t)||this.popoverElement.contains(t)||!document.body.contains(t)||this.hide(e)},s.prototype.hideOnEscapePress=function(e){27===e.which&&this.isVisible&&(this.popoverElement.contains(e.target)&&this.referenceElement.focus(),this.hide(e))},s.prototype.toggleOptionalClasses=function(t){var n;this.data.has("toggle-class")&&(n=this.referenceElement.classList,this.data.get("toggle-class").split(/\s+/).forEach(function(e){n.toggle(e,t)}))},s.targets=[],s);function s(){var e=null!==o&&o.apply(this,arguments)||this;return e.popoverSelectorAttribute="aria-controls",e}e.PopoverController=i}(Stacks=Stacks||{}),Stacks.application.register("s-popover",Stacks.PopoverController);__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(){var e,t;function n(){return null!==t&&t.apply(this,arguments)||this}function d(e,t){for(var n=[],r=e.children[0],o=[],i=[];r||i.some(function(e){return 0!==e});){var s=[];n.push(s);var a=0;if(r)for(var c=0;c<r.children.length;c++){for(;i[a];)i[a]--,s[a]=o[a],a++;var u=r.children[c];if(!(u instanceof HTMLTableCellElement))throw"invalid table";if("none"!==getComputedStyle(u).display){if(u===t)return a;for(var l=a+u.colSpan;a<l;a++)i[a]=u.rowSpan-1,o[a]=u,s[a]=u}}for(;a<o.length;)i[a]&&(i[a]--,s[a]=o[a]),a++;r=r&&r.nextElementSibling}return t?-1:n}Stacks.application.register("s-table",(t=Stacks.StacksController,__extends(n,t),n.prototype.setCurrentSort=function(t,r){if(["asc","desc","none"].indexOf(r)<0)throw"direction must be one of asc, desc, or none";var o=this;this.columnTargets.forEach(function(e){var n=e===t;e.classList.toggle("is-sorted",n&&"none"!==r),e.querySelectorAll(".js-sorting-indicator").forEach(function(e){var t=n?r:"none";e.classList.toggle("d-none",!e.classList.contains("js-sorting-indicator-"+t))}),n&&"none"!==r?o.setElementData(e,"sort-direction",r):o.removeElementData(e,"sort-direction")})},n.prototype.sort=function(e){var s=this,t=e.currentTarget;if(!(t instanceof HTMLTableCellElement))throw"invalid event target";var a,n,r,c,u,l,o=this.element,i=o.tBodies[0],p=function(e){if(!(e.parentElement&&e.parentElement.parentElement instanceof HTMLTableSectionElement))throw"invalid table";var t=d(e.parentElement.parentElement,e);if("number"==typeof t)return t;throw"shouldn't happen"}(t);p<0||(a=function(e){var t=d(e);if(t instanceof Array)return t;throw"shouldn't happen"}(i),n="asc"===this.getElementData(t,"sort-direction")?-1:1,r=Array.from(o.tBodies[0].rows),c=!1,u=[],r.forEach(function(e,t){var n,r,o,i=s.getElementData(e,"sort-to");"top"!==i&&("bottom"!==i?(n=a[t][p])?(""!==(o="string"==typeof(r=s.getElementData(n,"sort-val"))?r:n.textContent.trim())&&parseInt(o,10)+""!==o&&(c=!0),u.push([o,t])):u.push(["",t]):l=l||e)}),c||u.forEach(function(e){e[0]=""===e[0]?Number.MIN_VALUE:parseInt(e[0],10)}),u.sort(function(e,t){return e[0]>t[0]?n:e[0]<t[0]?-1*n:e[1]>t[1]?1:-1}),u.forEach(function(e){var t=r[e[1]];t.parentElement.removeChild(t),l?i.insertBefore(t,l):i.appendChild(t)}),this.setCurrentSort(t,1==n?"asc":"desc"))},(e=n).targets=["column"],e))}();var Stacks,__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(r){var n,e=(n=r.BasePopoverController,__extends(a,n),a.prototype.connect=function(){n.prototype.connect.call(this),window.matchMedia("(hover: hover)").matches&&this.bindMouseEvents()},a.prototype.disconnect=function(){this.unbindMouseEvents(),n.prototype.disconnect.call(this)},a.prototype.show=function(e){void 0===e&&(e=null);var t=r.application.getControllerForElementAndIdentifier(this.element,"s-popover");t&&t.isVisible||n.prototype.show.call(this,e)},a.prototype.scheduleShow=function(e){var t=this;void 0===e&&(e=null),window.clearTimeout(this.activeTimeout),this.activeTimeout=window.setTimeout(function(){return t.show(e)},300)},a.prototype.hide=function(e){void 0===e&&(e=null),window.clearTimeout(this.activeTimeout),this.activeTimeout=null,n.prototype.hide.call(this,e)},a.prototype.applyTitleAttributes=function(){var e,t=this.data.get("html-title");if(t)e=document.createRange().createContextualFragment(t);else{var n=this.element.getAttribute("title");if(!n)return null;e=document.createTextNode(n)}this.data.delete("html-title"),this.element.removeAttribute("title");var r=this.element.getAttribute("aria-describedby");r||(r=a.generateId(),this.element.setAttribute("aria-describedby",r));var o,i=document.getElementById(r);i||((i=document.createElement("div")).id=r,i.className="s-popover s-popover__tooltip pe-none",i.setAttribute("aria-hidden","true"),i.setAttribute("role","tooltip"),(o=this.element.parentNode)?o.insertBefore(i,this.element.nextSibling):document.body.appendChild(i));var s=i.querySelector(".s-popover--arrow");return i.innerHTML="",i.appendChild(e),s?i.appendChild(s):i.insertAdjacentHTML("beforeend",'<div class="s-popover--arrow"></div>'),this.scheduleUpdate(),i},a.prototype.bindDocumentEvents=function(){this.boundHideIfWithin=this.boundHideIfWithin||this.hideIfWithin.bind(this),document.addEventListener("s-popover:shown",this.boundHideIfWithin)},a.prototype.unbindDocumentEvents=function(){document.removeEventListener("s-popover:shown",this.boundHideIfWithin)},a.prototype.generatePopover=function(){return this.applyTitleAttributes()},a.prototype.hideIfWithin=function(e){e.target.contains(this.referenceElement)&&this.hide()},a.prototype.bindMouseEvents=function(){this.boundScheduleShow=this.boundScheduleShow||this.scheduleShow.bind(this),this.boundHide=this.boundHide||this.hide.bind(this),this.referenceElement.addEventListener("mouseover",this.boundScheduleShow),this.referenceElement.addEventListener("mouseout",this.boundHide)},a.prototype.unbindMouseEvents=function(){this.referenceElement.removeEventListener("mouseover",this.boundScheduleShow),this.referenceElement.removeEventListener("mouseout",this.boundHide)},a.generateId=function(){return"--stacks-s-tooltip-"+Math.random().toString(36).substring(2,10)},a.targets=[],a);function a(){var e=null!==n&&n.apply(this,arguments)||this;return e.popoverSelectorAttribute="aria-describedby",e}function o(e,t){t&&t.placement&&e.setAttribute("data-s-tooltip-placement",t.placement);var n=r.application.getControllerForElementAndIdentifier(e,"s-tooltip");n?n.applyTitleAttributes():e.setAttribute("data-controller",e.getAttribute("data-controller")+" s-tooltip")}r.TooltipController=e,r.setTooltipHtml=function(e,t,n){e.setAttribute("data-s-tooltip-html-title",t),e.removeAttribute("title"),o(e,n)},r.setTooltipText=function(e,t,n){e.setAttribute("title",t),e.removeAttribute("data-s-tooltip-html-title"),o(e,n)}}(Stacks=Stacks||{}),Stacks.application.register("s-tooltip",Stacks.TooltipController),Stacks._initializing=!1;