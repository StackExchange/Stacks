{% comment %}
Include this right at the start of body to be loaded as fast as possible to avoid a FOUC
{% endcomment %}
<script>
    (function () {
        var forceSetting = localStorage.getItem("forceDarkModeOn");
        var browserPrefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
        var darkModeEnabled = forceSetting === "true" || (!forceSetting && browserPrefersDark);

        if (browserPrefersDark) {
            document.body.classList.toggle("has-darkmode", darkModeEnabled);
            document.body.classList.toggle("has-darkmode__forced", false);
        }
        else {
            document.body.classList.toggle("has-darkmode", true);
            document.body.classList.toggle("has-darkmode__forced", darkModeEnabled);
        }
    }());
</script>