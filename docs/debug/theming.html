---
layout: page
title: Backgrounds
description: Debug page for checking themed components.
---

<div>TODO CONTROLS</div>

<div class="d-grid grid__2 g24 ai-start">
    <h2 class="grid--item grid--col-all m0">Components</h2>

    <div class="grid--item d-grid g16">
        <div class="grid--item">
            <button type="button" class="ws-nowrap s-btn s-btn__primary">primary</button>
            <a href="#" class="ws-nowrap s-btn s-btn__primary">link primary</a>
            <button class="s-btn" type="button">default</button>
            <button class="s-btn s-btn__outlined" type="button">outlined</button>
            <button class="s-btn s-btn__filled" type="button">filled</button>
        </div>

        <div class="grid--item">
            <div class="s-activity-indicator"></div>
            New activity
        </div>

        <div class="grid--item">
            <a class="post-tag" href="#">post-tag</a>
            <a class="post-tag required-tag" href="#">post-tag required</a>
            <a class="post-tag moderator-tag" href="#">post-tag moderator</a>
        </div>

        <div class="grid--item">
            <a class="s-tag" href="#">s-tag</a>
            <a class="s-tag is-selected" href="#">s-tag selected</a>
            <a class="grid--item s-tag s-tag__moderator" href="#">s-tag moderator</a>
            <a class="s-tag s-tag__required" href="#">s-tag required</a>
            <a class="s-tag s-tag__muted" href="#">s-tag muted</a>
            <a class="s-tag s-tag__themed" href="#">s-tag themed</a>
        </div>

        <div class="grid--item">
            <span class="s-badge">default badge</span>
            <span class="s-badge s-badge__admin">Admin badge</span>
            <span class="s-badge s-badge__moderator">Moderator badge</span>
            <span class="s-badge s-badge__staff">Staff badge</span>
        </div>

        <input class="s-input has-focus grid--item" type="text" placeholder="Focused input" />
        <div class="grid--item">
            <input class="s-checkbox" type="checkbox" disabled />
            <input class="s-checkbox" type="checkbox" disabled checked />
            <input class="s-checkbox" type="checkbox" />
            <input class="s-checkbox" type="checkbox" checked />
        </div>
        <div class="grid--item">
            <input class="s-radio" type="radio" disabled />
            <input class="s-radio" type="radio" disabled checked />
            <input class="s-radio" type="radio" />
            <input class="s-radio" type="radio" checked />
        </div>
    </div>

    <div class="grid--item d-grid g16">
        <div class="grid--item">
            <a href="#">bare link</a> | <a href="#" class="s-link">s-link</a> | <button class="s-btn s-btn__link" type="button">s-btn__link</button>
        </div>

        <a class="s-block-link is-selected s-block-link__right grid--item" href="#">block link</a>

        <nav class="s-sidebarwidget grid--item">
            <ul class="s-sidebarwidget--content s-sidebarwidget__items">
                <li class="s-sidebarwidget--item" aria-current="page">
                    <a href="#">
                        sidebar widget
                    </a>
                </li>
            </ul>
        </nav>

        <nav class="grid--item">
            <ul class="s-navigation">
                <li><a href="#" class="s-navigation--item is-selected">nav selected</a></li>
                <li><a href="#" class="s-navigation--item">nav</a></li>
            </ul>
        </nav>

        <div class="grid--item">
            <div class="s-pagination">
                <span class="s-pagination--item is-selected">1</span>
                <a class="s-pagination--item" href="#">2</a>
                <a class="s-pagination--item" href="#">3</a>
                <span class="s-pagination--item s-pagination--item__clear">â€¦</span>
                <a class="s-pagination--item" href="#">5</a>
                <a class="s-pagination--item" href="#">Next</a>
            </div>
        </div>

        <div class="grid--item">
            <div class="s-user-card s-user-card__highlighted">
                <time class="s-user-card--time">3 minutes ago</time>
                <a href="#" class="s-avatar s-avatar__32 s-user-card--avatar">
                    <img class="s-avatar--image" src="https://picsum.photos/32" />
                </a>
                <div class="s-user-card--info">
                    <a href="#" class="s-user-card--link">Highlighted user card</a>
                    <ul class="s-user-card--awards">
                        <li class="s-user-card--rep">2500</li>
                        <li class="s-award-bling s-award-bling__gold">1</li>
                        <li class="s-award-bling s-award-bling__silver">2</li>
                        <li class="s-award-bling s-award-bling__bronze">3</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="grid--item">
        <aside class="s-notice s-notice__info" role="status">Notice info<button type="button" class="s-btn s-notice--btn">{% icon "ClearSm" %}</button></aside>
        <aside class="s-notice s-notice__info s-notice__important" role="status">Notice info important<button type="button" class="s-btn s-notice--btn">{% icon "ClearSm" %}</button></aside>
    </div>
    <div class="grid--item">
        <aside class="s-banner s-banner__info ps-relative" role="alert">Banner info</aside>
        <aside class="s-banner s-banner__info s-banner__important ps-relative" role="alert">Banner info important</aside>
    </div>

    <div class="grid--item grid--col-all">
        <div class="s-progress s-progress__stepped">
            <div class="s-progress--step is-complete">
                <a href="#" class="s-progress--stop">
                    {% icon "CheckmarkSm" %}
                </a>
                <div class="s-progress--bar s-progress--bar__right"></div>
                <a class="s-progress--label">Create dashboard</a>
            </div>

            <div class="s-progress--step is-complete">
                <a href="#" class="s-progress--stop">
                    {% icon "CheckmarkSm" %}
                </a>
                <div class="s-progress--bar s-progress--bar__left"></div>
                <div class="s-progress--bar s-progress--bar__right"></div>
                <a class="s-progress--label">Add color stops / components</a>
            </div>

            <div class="s-progress--step is-active">
                <div class="s-progress--stop"></div>
                <div class="s-progress--bar s-progress--bar__left"></div>
                <div class="s-progress--bar s-progress--bar__right"></div>
                <div class="s-progress--label">Verify theme</div>
            </div>

            <div class="s-progress--step">
                <div class="s-progress--stop"></div>
                <div class="s-progress--bar s-progress--bar__left"></div>
                <div class="s-progress--label">Break production</div>
            </div>
        </div>
    </div>
</div>

<hr class="mt32" />

<div class="d-flex gsx gs24 flex__allitems6">
    <div class="flex--item">
        <h2>Primary theme stops</h2>
        <div class="mb16 js-primary-stops"></div>
    </div>

    <div class="flex--item">
        <h2>Secondary theme stops</h2>
        <div class="mb16 js-secondary-stops"></div>
    </div>
</div>

<div class="mt32">
    <h2>Component theme variables</h2>
    <div id="js-theme-variables"></div>
</div>

<template id="js-swatch-template">
    <div class="d-flex ai-center gsx gs8 js-swatch-container">
        <div class="flex--item">
            <div class="w24 h24 ba js-swatch" style="background-color: var(--white);"></div>
        </div>
        <div class="flex--item fl1 ws-nowrap js-swatch-text">@bgColorVar</div>
        <div class="flex--item ff-mono ta-right fs-caption js-swatch-value"></div>
    </div>
</template>

<script>
    function generateStopSwatches() {
        const nativeStops = [ "900", "800", "700", "600", "500", "400", "350", "300", "200", "150", "100", "075", "050", "025", "color" ];

        const primaryEl = document.querySelector(".js-primary-stops");
        const primary = nativeStops.map(s => generateSwatch(`theme-primary-${s}`, primaryEl));
        primaryEl.append(...primary);

        const secondaryEl = document.querySelector(".js-secondary-stops");
        const secondary = nativeStops.map(s => generateSwatch(`theme-secondary-${s}`, secondaryEl));
        secondaryEl.append(...secondary);
    }

    function getAllRootThemeVariables() {
        const sheets = Array.from(document.styleSheets);
        const allVariables = sheets.reduce((acc, sheet) => {
            let cssRules = [];
            try { cssRules = Array.from(sheet.cssRules); } catch (e) {}
            const styles = cssRules
                .filter(r => r.selectorText?.includes("body"))
                .reduce((def, rule) => [
                        ...def,
                        ...Array.from(rule.style).filter((name) => name.startsWith("--")),
                    ], []);
            return [...acc, ...styles];
        }, []);

        return allVariables
            .filter((v) => v.startsWith("--theme-") && !/theme-(primary|secondary)/.test(v))
            .filter((val, index, self) => self.indexOf(val) === index)
            .map(v => v.replace("--", ""))
            .sort();
    }

    function getVariableValue(prop, el) {
        return window.getComputedStyle(el || document.documentElement).getPropertyValue(`--${prop}`);
    }

    function getSwatchValueText(swatchContainerEl) {
        const valEl = swatchContainerEl.querySelector(".js-swatch-value");
        const swEl = swatchContainerEl.querySelector(".js-swatch");
        // the raw value should already be in the title, use it if it isn't calculated
        const title = valEl.getAttribute("title");
        const value = title && !title.includes("calc") ? title : window.getComputedStyle(swEl).backgroundColor;
        return value;
    }

    function fillSwatchColorText() {
        // add the calculated color text to all swatches
        document.querySelectorAll(".js-swatch-container").forEach(el => {
            const value = getSwatchValueText(el);
            el.querySelector(".js-swatch-value").textContent = value;
        });
    };

    function generateSwatch(bgColorVar, scopeElement) {
        var template = document.querySelector("#js-swatch-template").content.cloneNode(true);
        template.querySelector(".js-swatch").style.backgroundColor = `var(--${bgColorVar})`;
        template.querySelector(".js-swatch-text").textContent = bgColorVar;
        template.querySelector(".js-swatch-value").setAttribute("title", getVariableValue(bgColorVar, scopeElement).trim());
        return template;
    }

    function init() {
        generateStopSwatches();

        const themeVariables = getAllRootThemeVariables();

        const themeVariableContainer = document.querySelector("#js-theme-variables");
        let prevVal;
        themeVariables.forEach(v => {
            let curVal = v.split("-")[1];

            if (prevVal && curVal !== prevVal) {
                themeVariableContainer.append(document.createElement("br"));
            }

            prevVal = curVal;

            var swatchB = generateSwatch(v, themeVariableContainer);
            themeVariableContainer.append(swatchB);
        });

        // fill swatch color text *after* the generated swatches have been added to the page
        fillSwatchColorText();
    }

    window.addEventListener("load", init);
</script>