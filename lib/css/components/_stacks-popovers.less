//
//  STACK OVERFLOW
//  POPOVERS
//
//  This CSS comes from Stacks, our CSS & Pattern library for rapidly building
//  Stack Overflow. For documentation of all these classes and how to contribute,
//  visit https://stackoverflow.design/
//
//  TABLE OF CONTENTS
//  • VARIABLES
//  • BASE STYLE
//  • ARROWS
//  • LOCATIONS
//
//  ============================================================================
//  $   BASE STYLES
//  ----------------------------------------------------------------------------
.s-popover {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    max-width: 24rem;
    padding: @su12;
    z-index: @zi-popovers;
    border-radius: @br-md;
    border: 1px solid var(--black-100);
    background-color: var(--white);
    box-shadow: var(--bs-md);
    color: var(--fc-dark);
    font-size: @fs-body1;
    min-width: 12rem;
    width: 100%;

    &.s-popover__tooltip {
        width: auto;
        min-width: unset;
        transition-delay: 200ms;
        transition-property: opacity, visibility;
    }

    &.is-visible {
        visibility: visible;
        opacity: 1;
        transition-delay: 0;
    }

    // Auto adjust margins for auto-placed popovers
    &[data-popper-placement^="top"] {
        margin-bottom: @su8 + 2px;
    }

    &[data-popper-placement^="right"] {
        margin-left: @su8 + 2px;
    }

    &[data-popper-placement^="bottom"] {
        margin-top: @su8 + 2px;
    }

    &[data-popper-placement^="left"] {
        margin-right: @su8 + 2px;
    }
}

#stacks-internals #darkmode('.s-popover', {
    background-color: var(--black-075);
    border-color: transparent;
    box-shadow: var(--bs-lg);
});

//  ============================================================================
//  $   CLOSE BUTTON
//  ----------------------------------------------------------------------------

.s-popover--close {
    float: right; // Use floats for title wrapping
    top: -@su8; // Compensate for s-popover's padding
    right: -@su8; // Compensate for s-popover's padding
    padding: @su8 !important;
}

//  ============================================================================
//  $   ARROWS
//  ----------------------------------------------------------------------------
//
//  TABLE OF CONTENTS
//  • BASE STYLE
//  • LOCATIONS
//      • TOP
//      • BOTTOM
//      • TOP & BOTTOM DIRECTIONS (Left, Center, Right)
//      • LEFT
//      • RIGHT
//      • LEFT & RIGHT DIRECTIONS (Top, Center, Bottom)
//
//  ============================================================================
//  $   BASE STYLE
//      Sets the base arrow style for tooltips, popovers, and dropdowns.
//  ----------------------------------------------------------------------------
.s-popover--arrow,
.s-popover--arrow__tl,
.s-popover--arrow__tc,
.s-popover--arrow__tr,
.s-popover--arrow__bl,
.s-popover--arrow__bc,
.s-popover--arrow__br,
.s-popover--arrow__lt,
.s-popover--arrow__lc,
.s-popover--arrow__lb,
.s-popover--arrow__rt,
.s-popover--arrow__rc,
.s-popover--arrow__rb {
    color: var(--white);

    &:before,
    &:after {
        content: "";
        position: absolute;
        border-width: @su8;
        border-style: solid;
        border-color: transparent;
    }
}

#stacks-internals #darkmode('', {
    .s-popover--arrow,
    .s-popover--arrow__tl,
    .s-popover--arrow__tc,
    .s-popover--arrow__tr,
    .s-popover--arrow__bl,
    .s-popover--arrow__bc,
    .s-popover--arrow__br,
    .s-popover--arrow__lt,
    .s-popover--arrow__lc,
    .s-popover--arrow__lb,
    .s-popover--arrow__rt,
    .s-popover--arrow__rc,
    .s-popover--arrow__rb {
        color: var(--black-075);
    }
});

//  ============================================================================
//  $   ARROW LOCATIONS
//  ============================================================================
//  $$  TOP
//  ----------------------------------------------------------------------------
.s-popover[data-popper-placement^="bottom"] .s-popover--arrow,
.s-popover--arrow__tl,
.s-popover--arrow__tc,
.s-popover--arrow__tr {
    &:before,
    &:after {
        border-top: none;
    }
    &:before {
        top: -(@su8);
        border-bottom-color: var(--black-100);
    }
    &:after {
        top: -(@su8 - 1);
        border-bottom-color: currentColor;
    }
}

//  $$  BOTTOM
//  ----------------------------------------------------------------------------
.s-popover[data-popper-placement^="top"] .s-popover--arrow,
.s-popover--arrow__bl,
.s-popover--arrow__bc,
.s-popover--arrow__br {
    &:before,
    &:after {
        border-bottom: none;
    }
    &:before {
        bottom: -(@su8);
        border-top-color: var(--black-100);
    }
    &:after {
        bottom: -(@su8 - 1);
        border-top-color: currentColor;
    }
}

//  $$  TOP & BOTTOM LEFT
//  ----------------------------------------------------------------------------
.s-popover[data-popper-placement="top-start"] .s-popover--arrow,
.s-popover[data-popper-placement="bottom-start"] .s-popover--arrow,
.s-popover--arrow__tl,
.s-popover--arrow__bl {
    &:before,
    &:after {
        left: @su12;
    }
}

//  $$  TOP & BOTTOM CENTER
//  ----------------------------------------------------------------------------
.s-popover[data-popper-placement="top"] .s-popover--arrow,
.s-popover[data-popper-placement="bottom"] .s-popover--arrow,
.s-popover--arrow__tc,
.s-popover--arrow__bc {
    &:before,
    &:after {
        left: 50%;
        margin-left: -(@su8);
    }
}

//  $$  TOP & BOTTOM RIGHT
//  ----------------------------------------------------------------------------
.s-popover[data-popper-placement="top-end"] .s-popover--arrow,
.s-popover[data-popper-placement="bottom-end"] .s-popover--arrow,
.s-popover--arrow__tr,
.s-popover--arrow__br {
    &:before,
    &:after {
        right: @su12;
    }
}

//  $$  LEFT
//  ----------------------------------------------------------------------------
.s-popover[data-popper-placement^="right"] .s-popover--arrow,
.s-popover--arrow__lt,
.s-popover--arrow__lc,
.s-popover--arrow__lb {
    &:before,
    &:after {
        border-left: none;
    }
    &:before {
        left: -(@su8);
        border-right-color: var(--black-100);
    }
    &:after {
        left: -(@su8 - 1);
        border-right-color: currentColor;
    }
}

//  $$  RIGHT
//  ----------------------------------------------------------------------------
.s-popover[data-popper-placement^="left"] .s-popover--arrow,
.s-popover--arrow__rt,
.s-popover--arrow__rc,
.s-popover--arrow__rb {
    &:before,
    &:after {
        border-right: none;
    }
    &:before {
        right: -(@su8);
        border-left-color: var(--black-100);
    }
    &:after {
        right: -(@su8 - 1);
        border-left-color: currentColor;
    }
}

//  $$  LEFT & RIGHT TOP
//  ----------------------------------------------------------------------------
.s-popover[data-popper-placement="left-start"] .s-popover--arrow,
.s-popover[data-popper-placement="right-start"] .s-popover--arrow,
.s-popover--arrow__lt,
.s-popover--arrow__rt {
    &:before,
    &:after {
        top: @su12;
    }
}

//  $$  LEFT & RIGHT CENTER
//  ----------------------------------------------------------------------------
.s-popover[data-popper-placement="left"] .s-popover--arrow,
.s-popover[data-popper-placement="right"] .s-popover--arrow,
.s-popover--arrow__lc,
.s-popover--arrow__rc {
    &:before,
    &:after {
        top: 50%;
        margin-top: -(@su8);
    }
}

//  $$  LEFT & RIGHT BOTTOM
//  ----------------------------------------------------------------------------
.s-popover[data-popper-placement="left-end"] .s-popover--arrow,
.s-popover[data-popper-placement="right-end"] .s-popover--arrow,
.s-popover--arrow__lb,
.s-popover--arrow__rb {
    &:before,
    &:after {
        bottom: @su12;
    }
}
