.s-checkbox,
.s-radio {
    // CONTEXTUAL STYLES
    fieldset[disabled] &,
    &[disabled] {
        cursor: not-allowed;
        opacity: var(--_o-disabled-static);
    }

    // STATE
    &::-ms-check { // TODO do we still need this? I don't think so, but help me Windows peeps!
        display: none;
    }

    appearance: none;
    cursor: pointer;
    font-size: inherit;
    height: 1em;
    margin: 0; // A guard against Core's default margins
    outline: 0;
    vertical-align: middle;
    width: 1em;
}
.s-checkbox {
    --_ch-bc: var(--bc-darker);
    --_ch-bc-focus: var(--theme-secondary-300);
    --_ch-bg: var(--white);
    --_ch-bg-image: unset;

    // CONTEXTUAL STYLES
    .highcontrast-dark-mode({
        &:checked, &:indeterminate {
            --_ch-bc: var(--blue-700) !important;
            --_ch-bc-focus: var(--_ch-bc);
            --_ch-bg: var(--blue-300);
        }
    });

    // STATES
    &:checked, &:indeterminate {
        --_ch-bc: var(--theme-secondary-400) !important;
        --_ch-bg: var(--theme-secondary-400);

        &:focus {
            --_ch-bc-focus: var(--theme-secondary-400);
        }
    }
    &:checked {
        --_ch-bg-image: url("data:image/svg+xml,%3Csvg width='11' height='11' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 3.41L8.59 2 4 6.59 2.41 5 1 6.41l3 3z' fill='%23fff'/%3E%3C/svg%3E");
    }
    &:indeterminate {
        --_ch-bg-image: url("data:image/svg+xml,%3Csvg width='11' height='11' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M2 4.5 h7 v2 h-7 z' fill='%23fff'/%3E%3C/svg%3E");
    }

    // INTERACTION
    &:focus {
        border-color: var(--_ch-bc-focus);
        box-shadow: 0 0 0 var(--su-static4) var(--focus-ring);
    }

    background-color: var(--_ch-bg);
    background-image: var(--_ch-bg-image);
    border: var(--su-static1) solid var(--_ch-bc);

    background-position: center center;
    background-repeat: no-repeat;
    background-size: contain;
    border-radius: var(--br-sm);
}
.s-radio {
    --_ra-baw: var(--su-static1);
    --_ra-bc: var(--bc-darker);
    --_ra-bg: var(--white);

    // CONTEXTUAL STYLES
    .highcontrast-dark-mode({
        &:checked {
            --_ra-bc: var(--blue-300);
            outline: var(--su-static1) solid var(--black);
        }
    });
    .dark-mode({
        &:checked {
            --_ra-bg: var(--black);
        }
    });

    // STATES
    &:checked {
        --_ra-baw: 0.30769231em;
        --_ra-bc: var(--theme-secondary-400);
        --_ra-bg: var(--white);
    }

    // INTERACTION
    &:focus {
        box-shadow: 0 0 0 var(--su-static4) var(--focus-ring);
    }

    background-color: var(--_ra-bg);
    border: var(--_ra-baw) solid var(--_ra-bc);

    border-radius: var(--br-circle);
}

.s-check-control { // TODO would _love_ to use .s-check instead, with no class on the input itself
    .s-label {
        [disabled] + & {
            &:extend(.is-disabled .s-label);
        }

        font-weight: normal;
    }

    align-items: center;
    display: flex;
    gap: var(--su8);
}
.s-check-group {
    // MODIFIERS
    &&__horizontal {
        flex-direction: row;
    }

    // CHILD ELEMENTS
    legend.s-label { // TODO HACK? <legend> isn't respecting gap...
        margin-bottom: var(--su8);
    }
    .s-check-control { // manually align the checkboxes and radios to the top of the group
        align-items: flex-start;
    }
    .s-checkbox, .s-radio {
        margin-top: calc(var(--su2) + var(--su1)); // 3px
    }

    display: flex;
    flex-direction: column;
    gap: var(--su8);
}

.has-warning { // TODO move these styles to their component contexts
    .s-checkbox,
    .s-radio:not(:checked) {
        border-color: var(--yellow-600);

        &:focus {
            box-shadow: 0 0 0 var(--su-static4) var(--focus-ring-warning);
        }
    }
}
.has-error { // TODO move these styles to their component contexts
    .s-checkbox,
    .s-radio:not(:checked) {
        border-color: var(--red-400);

        &:focus {
            box-shadow: 0 0 0 var(--su-static4) var(--focus-ring-error);
        }
    }
}
.has-success { // TODO move these styles to their component contexts
    .s-checkbox,
    .s-radio:not(:checked) {
        border-color: var(--green-400);

        &:focus {
            box-shadow: 0 0 0 var(--su-static4) var(--focus-ring-success);
        }
    }
}