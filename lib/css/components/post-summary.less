.s-post-summary {
    // --_ps-state-* are custom properties to broadly override colors for a given post summary state
    --_ps-bb: var(--su1) solid var(--bc-light);
    --_ps-bg: unset;
    // Child components
    --_ps-content-excerpt-fc: var(--_ps-state-fc, var(--fc-medium));
    --_ps-content-title-a-fc: var(--_ps-state-fc, var(--theme-post-title-color));
    --_ps-content-title-a-fc-hover: var(--_ps-state-fc, var(--theme-post-title-color-hover));
    --_ps-content-title-a-fc-visited: var(--_ps-state-fc, var(--theme-post-title-color-visited));
    --_ps-stats-ai: flex-end;
    --_ps-stats-fc: var(--_ps-state-fc, var(--fc-light));
    --_ps-stats-fd: column;
    --_ps-stats-w: calc(var(--su96) + var(--su12));
    // Stats item modifiers
    --_ps-has-answers-bc: var(--green-700);
    --_ps-has-answers-bg: unset;
    --_ps-has-answers-fc: var(--green-700);
    --_ps-has-accepted-answers-bc: var(--green-700);
    --_ps-has-accepted-answers-bg: var(--green-700);
    --_ps-has-accepted-answers-fc: var(--white);
    --_ps-stats-item-emphasized-fc: var(--_ps-state-fc, var(--fc-dark));

    #stacks-internals #screen-md({
        --_ps-stats-ai: center;
        --_ps-stats-fd: row;
        --_ps-stats-w: auto;

        flex-direction: column;
    });

    background-color: var(--_ps-bg);
    border-bottom: var(--_ps-bb);
    display: flex;
    padding: var(--su16);
    position: relative;

    // Variants
    &&__minimal,
    & &--answer {
        --_ps-stats-ai: center;
        --_ps-stats-fd: row;
        --_ps-stats-w: auto;
    }

    &&__minimal {
        .s-post-summary--content {
            width: 100%;
        }

        flex-direction: column;
    }

    // States
    &&__deleted,
    &&__ignored {
        --_ps-has-answers-bc: var(--black-300);
        --_ps-has-answers-bg: transparent;
        --_ps-has-answers-fc: var(--black-500);
        --_ps-has-accepted-answers-bc: transparent;
        --_ps-has-accepted-answers-bg: var(--black-075);
        --_ps-has-accepted-answers-fc: var(--black-600);
        --_ps-meta-tags-tag-bg: var(--black-050);
        --_ps-state-fc: var(--black-500);

        .s-post-summary--meta-tags {
            // TODO: remove rule for `a` once Core replaces `.post-tag` with `.s-tag`
            a,
            .post-tag,
            .s-tag {
                &,
                &:active,
                &:hover,
                &:focus {
                    background-color: var(--_ps-meta-tags-tag-bg);
                    border-color: transparent;
                    color: var(--black-600);
                }
            }
        }

        .s-user-card {
            .s-badge {
                filter: grayscale(100%);
            }

            a,
            .s-user-card--link,
            .s-user-card--rep,
            .s-user-card--time {
                color: var(--_ps-state-fc);
            }
        }
    }

    &&__deleted,
    &&__watched {
        background-color: var(--_ps-bg);
    }

    &&__deleted {
        --_ps-bg: var(--red-025);
        --_ps-meta-tags-tag-bg: var(--black-075);

        .is-deleted,
        .s-badge__danger.s-badge__filled {
            .dark-mode({
                background-color: var(--red-800);
            });

            background-color: var(--red-600);
        }
    }

    &&__watched {
        &:not(.s-post-summary__deleted):not(.s-post-summary__ignored) {
            --_ps-bg: var(--yellow-050);
            --_ps-stats-fc: var(--black-500);
            --_ps-content-title-a-fc: var(--theme-link-color-dark, var(--theme-post-title-color));
            --_ps-content-title-a-fc-hover: var(--theme-link-color-dark-hover, var(--theme-post-title-color-hover));
            --_ps-content-title-a-fc-visited: var(--theme-link-color-dark-visited, var(--theme-post-title-color-visited));

            .s-user-card {
                a {
                    color: var(--_ps-content-title-a-fc);

                    &:hover,
                    &:active {
                        color: var(--_ps-content-title-a-fc-hover);
                    }
                    &:visited {
                        color: var(--_ps-content-title-a-fc-visited);
                    }
                }

                .s-user-card--rep,
                .s-user-card--time {
                    color: var(--black-600);
                }
            }
        }
    }


    // Child Elements
    & & {
        &--answer {
            position: relative;
            margin: var(--su16) 1em 0 1em;
            padding: 0.5em 0 0.5em calc(1em + var(--su4));

            & + & {
                margin-top: var(--su16);
            }

            &:before {
                content: "";
                display: block;
                position: absolute;
                top: 0;
                bottom: 0;
                left: 0;
                width: var(--su4);
                border-radius: var(--su8);
                background: var(--black-150);

                .highcontrast-mode({
                    background: var(--black-600);
                });
            }
        }

        &--answer-excerpt {
            color: var(--black-600);
            margin-bottom: var(--su8);
            .v-truncate4;
        }

        &--content {
            flex-grow: 1;
            max-width: 100%;
        }

        &--content-excerpt {
            color: var( --_ps-content-excerpt-fc);
            font-family: var(--theme-post-body-font-family);
            margin-top: calc(var(--su2) * -1);
            margin-bottom: var(--su8);
            .break-word;
            .v-truncate2;

            &&__sm {
                .v-truncate1;
            }

            &&__md {
                .v-truncate3;
            }

            &&__lg {
                .v-truncate4;
            }
        }

        //  [1] To override .s-btn class attributes
        &--content-menu-button {
            .svg-icon {
                margin: 0 !important;
            }

            padding: var(--su8) !important; // [1]
            position: absolute !important; // [1]
            right: var(--su8);
            top: var(--su8);
        }

        &--content-title {
            display: block;
            font-size: var(--fs-body3);
            font-weight: normal;
            line-height: var(--lh-md);
            margin-bottom: 0.3846rem;
            margin-top: -0.15rem; // Optical alignment to compensate for title's containing block
            padding-right: var(--su24);
            .break-word;

            .iconShield {
                color: var(--fc-light);
            }

            .svg-icon {
                position: relative;
                top: calc(var(--su1) * -1);
                vertical-align: text-bottom; // Optical alignment
            }

            a {
                .break-word;

                color: var(--_ps-content-title-a-fc);
                font-family: var(--theme-post-title-font-family);

                &:visited {
                    color: var(--_ps-content-title-a-fc-visited);
                }

                &:hover,
                &:active {
                    color: var(--_ps-content-title-a-fc-hover);
                }
            }
        }

        &--content-type {
            color: var(--fc-medium);
            margin-bottom: var(--su4);

            .svg-icon {
                color: var(--fc-light);
                margin-left: calc(var(--su2) * -1);
            }
        }

        &--meta {
            align-items: center;
            column-gap: var(--su6);
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            row-gap: var(--su8);

            .s-user-card {
                flex-wrap: wrap;
                justify-content: flex-end;
                margin-left: auto;
            }
        }

        &--meta-tags {
            display: flex;
            flex-wrap: wrap;
            gap: var(--su4);
        }

        &--stats {
            align-items: var(--_ps-stats-ai);
            color: var(--_ps-stats-fc);
            flex-direction: var(--_ps-stats-fd);
            width: var(--_ps-stats-w);

            display: flex;
            flex-shrink: 0;
            flex-wrap: wrap;
            font-size: var(--fs-body1);
            gap: var(--su6);
            margin-bottom: var(--su4);
            margin-right: var(--su16);
        }

        &--stats-item {
            &:not(.s-badge) {
                align-items: center;
                border: var(--su1) solid transparent;
                display: inline-flex;
                gap: 0.3em;
                justify-content: center;
                white-space: nowrap;
            }

            &.s-badge {
                font-size: var(--fs-body1);
                line-height: var(--lh-md);
                padding: var(--su2) var(--su4);
            }

            &.has-answers,
            // TODO DEPRECATED: Remove .has-bounty styling
            &.has-bounty,
            &.is-deleted,
            &.is-published,
            &.is-draft,
            &.is-review,
            &.is-closed,
            &.is-archived,
            &.is-pinned {
                border-radius: var(--br-sm);
                padding: var(--su2) var(--su4);
            }

            &.has-answers {
                background-color: var(--_ps-has-answers-bg);
                border: var(--su1) solid var(--_ps-has-answers-bc);
                color: var(--_ps-has-answers-fc);

                &.has-accepted-answer {
                    background-color: var(--_ps-has-accepted-answers-bg);
                    border-color: var(--_ps-has-accepted-answers-bc);
                    color: var(--_ps-has-accepted-answers-fc);
                }
            }

            // TODO DEPRECATED: Remove and replace with references with `s-badge s-badge__bounty`
            &.has-bounty {
                background-color: var(--blue-600);
                color: var(--white);
            }

            &.is-warm {
                color: var(--_ps-state-fc, var(--yellow-900));
            }

            &.is-hot {
                color: var(--_ps-state-fc, var(--orange-800));
            }

            &.is-supernova {
                color: var(--_ps-state-fc, var(--red-800));
            }

            &.is-published {
                background-color: var(--black-050);
                color: var(--black-800);
            }
            // TODO DEPRECATED: Remove and replace with references with `s-badge s-badge__info s-badge__icon`
            &.is-draft {
                background-color: var(--blue-100);
                border-color: var(--blue-600);
                color: var(--blue-900);
            }
            // TODO DEPRECATED: Remove and replace with references with `s-badge s-badge__warning s-badge__icon`
            &.is-review {
                background-color: var(--yellow-100);
                border-color: var(--yellow-600);
                color: var(--yellow-900);
            }
            // TODO DEPRECATED: Remove and replace with references with `s-badge s-badge__danger s-badge__icon`
            &.is-closed {
                background-color: var(--red-100);
                border-color: var(--red-600);
                color: var(--red-900);
            }
            // TODO DEPRECATED: Remove and replace with references with `s-badge s-badge__muted s-badge__icon`
            &.is-archived {
                background-color: var(--black-100);
                border-color: var(--black-600);
                color: var(--black-900);
            }
            // TODO DEPRECATED: Remove and replace with references with `s-badge s-badge__muted s-badge__filled s-badge__icon`
            &.is-pinned {
                background-color: var(--black-700);
                color: var(--white);
            }

            &__emphasized {
                color: var(--_ps-stats-item-emphasized-fc);
            }
        }

        &--stats-item-number {
            font-weight: 500;
        }

        // Base styling
        &:last-child {
            --_ps-bb: none;
        }
    }
}
