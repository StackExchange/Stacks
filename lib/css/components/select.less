.s-select {
    --_se-arrow-bc: currentColor transparent;
    --_se-arrow-size: var(--su-static4); // Constant
    --_se-select-bc: var(--bc-darker);
    --_se-select-bc-focus: var(--theme-secondary-300);
    --_se-select-bs-focus: 0 0 0 var(--su-static4) var(--focus-ring);
    --_se-select-bg: var(--white);
    --_se-select-br: var(--br-sm);
    --_se-select-fc: var(--black);
    --_se-select-px: 0.7em;
    --_se-select-py: 0.6em;
    --_se-select-fs: var(--fs-body1);

    // CONTEXTUAL STYLES
    @supports (-webkit-overflow-scrolling: touch) {
        --_se-select-fs: 16px; // Increase font size for mobile safari. This keeps our inputs from zooming the page while focused
        --_se-select-px: 0.55em; // Compensate for the larger font size so we generally keep the input the same size
        --_se-select-py: 0.4em; // Compensate for the larger font size so we generally keep the input the same size
    }

    // MODIFIERS
    .is-disabled &,
    .is-readonly &,
    .has-success &,
    .has-error &,
    .has-warning & {
        position: relative;
    }

    .is-disabled & {
        --_se-arrow-bc: var(--bc-darker) transparent;
    }

    &&__sm {
        --_se-select-fs: var(--fs-caption);
    }

    &&__md {
        --_se-select-br: calc(var(--br-sm) + var(--su-static1));
        --_se-select-fs: var(--fs-body3);
        --_se-select-py: 0.5em;
    }

    &&__lg {
        --_se-select-br: calc(var(--br-sm) + var(--su-static1));
        --_se-select-fs: var(--fs-title);
        --_se-select-px: 0.6em;
        --_se-select-py: 0.45em;
    }

    &&__xl {
        --_se-select-br: var(--br-md);
        --_se-select-fs: var(--fs-headline1);
        --_se-select-px: 0.5em;
        --_se-select-py: 0.4em;
    }

    .has-error & {
        --_se-select-bc: var(--red-400);
        --_se-select-bc-focus: var(--red-400);
        --_se-select-bs-focus: 0 0 0 var(--su-static4) var(--focus-ring-error);
    }

    .has-success & {
        --_se-select-bc: var(--green-400);
        --_se-select-bc-focus: var(--green-400);
        --_se-select-bs-focus: 0 0 0 var(--su-static4) var(--focus-ring-success);
    }

    .has-warning & {
        --_se-select-bc: var(--yellow-600);
        --_se-select-bc-focus: var(--yellow-600);
        --_se-select-bs-focus: 0 0 0 var(--su-static4) var(--focus-ring-warning);
    }

    // CHILD ELEMENTS
    &,
    & > select {
        &::-webkit-contacts-auto-fill-button {
            background-color: var(--black); // In Safari, make the autocomplete button darkmode-aware
        }

        &:-webkit-autofill {
            border-color: var(--blue-300);
            -webkit-text-fill-color: var(--black);
            -webkit-box-shadow: 0 0 0 1000px var(--theme-secondary-050) inset; // This acts as a background color by stretching an inset box shadow across the input
            transition: background-color 0s 50000s; // A hack to infinitely delay background styles that come from the browser.

            &:focus {
                border-color: var(--blue-300);
                // Since the box shadow is overwritten to show a background, we have to re-add the focus outline
                -webkit-box-shadow: 0 0 0 1000px var(--blue-050) inset, 0 0 0 var(--su-static4) var(--focus-ring);
            }
        }
    }

    &:before,
    &:after { // menu arrows
        border-color: var(--_se-arrow-bc);
        border-style: solid;
        border-width: var(--_se-arrow-size);
        content: "";
        pointer-events: none;
        position: absolute;
        right: calc(var(--su-static12) + var(--su-static1));
        z-index: var(--zi-selected);
    }

    &:after {
        border-bottom-width: 0;
        top: calc(50% + var(--su-static1));
    }

    &:before {
        border-top-width: 0;
        top: calc(50% - calc(var(--_se-arrow-size) + var(--su-static1)));
    }

    > select { // Menu
        // CONTEXTUAL STYLES
        fieldset[disabled] &,
        &[disabled] {
            cursor: not-allowed;
            opacity: var(--_o-disabled-static);
        }

        &[readonly],
        .is-readonly & { // [1]
            --_se-select-bc: var(--bc-light);
            --_se-select-bg: var(--black-050);
            --_se-select-fc: var(--black-200);

            .highcontrast-mode({
                --_se-select-fc: var(--fc-light);
            });

            cursor: not-allowed;
        }

        // CHILD ELEMENTS
        &::-moz-focus-inner {
            outline: none !important;
        }

        &:-moz-focusring {
            color: transparent;
            text-shadow: 0 0 0 #000;
        }

        &::-ms-expand {
            display: none;
        }

        // INTERACTION
        &:focus {
            .highcontrast-mode({
                --_se-select-bc-focus: var(--black);
            });

            border-color: var(--_se-select-bc-focus);
            box-shadow: var(--_se-select-bs-focus);

            color: var(--black);
            outline: 0;
        }

        background-color: var(--_se-select-bg);
        border: var(--su-static1) solid var(--_se-select-bc);
        border-radius: var(--_se-select-br);
        color: var(--_se-select-fc);
        font-size: var(--_se-select-fs);
        padding: var(--_se-select-py) var(--_se-select-px);

        appearance: none;
        font-family: inherit;
        height: 100%; // Fill the height of its parent
        line-height: var(--lh-sm);
        outline: 0;
        padding-right: var(--su32);
        position: relative; // This prevents Firefox from requiring a second click to select options
        width: 100%;
    }

    .s-input-icon {
        right: var(--su32);
    }

    color: var(--fc-dark);
    position: relative;
}

// [1] The readonly attribute is not supported on select elements
//      See https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/readonly
//      and https://github.com/StackExchange/Stacks/pull/1040#discussion_r931144086
