.s-toggle-switch {
    --_ts-bg: var(--black-300);
    --_ts-bg-ps: left center;
    // --_ts-bs is defined when needed

    input[type="checkbox"]&,
    // TODO DEPRECATED: drop support for nested input[type="checkbox"]
    input[type="checkbox"] {
        &:checked {
            --_ts-bg: var(--green-400);
            --_ts-bg-ps: right center;

            &:focus {
                --_ts-bs-color: var(--focus-ring-success);
            }
        }

        &:focus {
            --_ts-bs-color: var(--focus-ring-muted);
            --_ts-bs: 0 0 0 var(--su-static4) var(--_ts-bs-color);

            outline: none;
        }
        
        &[disabled] {
            cursor: default;
        }

        background-color: var(--_ts-bg);
        background-position: var(--_ts-bg-ps);
        box-shadow: var(--_ts-bs, unset);

        appearance: none;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e"); // The white dot within the toggle
        background-size: contain;
        background-repeat: no-repeat;
        border-radius: 1000px;
        cursor: pointer;
        height: var(--su-static24);
        margin: 0; // guard against production adding 5px of margin to these
        transition: background-position 0.2s ease;
        vertical-align: top;
        width: calc(var(--su-static48) - var(--su-static4));
    }

    // TODO split single and multiple toggle into two seperate components
    &&__multiple {
        --_ts-multiple-bg: unset;
        // --_ts-multiple-bs is defined when needed
        --_ts-multiple-fc: var(--black-500);

        input[type="radio"] {
            left: -999em;
            margin: 0;
            opacity: 0;
            position: absolute;

            &:checked {
                + label {
                    &.s-toggle-switch--label-off {
                        --_ts-multiple-bg: var(--black-500);
                        --_ts-multiple-fc: var(--white);

                        .dark-mode({
                            --_ts-multiple-bg: var(--black-350);
                        });
                    }

                    &:not(.s-toggle-switch--label-off) {
                        --_ts-multiple-bg: var(--green-400);
                        --_ts-multiple-fc: @white;

                        .highcontrast-mode({
                            --_ts-multiple-fc: var(--white);
                        });
                    }
                }

                &:focus + label {
                    --_ts-bs-color: var(--focus-ring-success);
                    --_ts-multiple-bs: 0 0 0 var(--su-static4) var(--_ts-bs-color);

                    &.s-toggle-switch--label-off {
                        --_ts-bs-color: var(--focus-ring-muted);
                    }
                }
            }
        }

        label {
            background-color: var(--_ts-multiple-bg);
            box-shadow: var(--_ts-multiple-bs, unset);
            color: var(--_ts-multiple-fc);

            border-radius: 1000px;
            cursor: pointer;
            font-size: var(--fs-body1);
            font-weight: 400;
            line-height: 1;
            margin: 0;
            padding: 0.5em 0.7em;
            text-align: center;
            white-space: nowrap;
            width: 100%;

            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        align-items: stretch;
        display: flex;
    }
}
