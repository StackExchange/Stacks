@import (reference) "./color-mixins.less";

// EXISTING ISSUES
// - theme primary vars not generated properly ü§∑‚Äç‚ôÇÔ∏è (--_ private var issue via Less)
// - --_white-new not generated properly (extract("", 2))
//
// QUIRKS
// - Less: `each` not working in .create-colors (using for loop instead)

:root {
    // deconstruct the default colors in less
    // this keeps the hsl/rgb variables below in sync
    // consumers will need to set each variable separately // TODO verify this last part
    .create-custom-theme-hsl-rgb-variables(@theme-light-default[primary], primary);
    .create-custom-theme-hsl-rgb-variables(@theme-light-default[secondary], secondary);
    // custom
    .create-custom-theme-hsl-rgb-variables(#00ff11, primary, theme-light);
}

body {
    .generate-colors();
}

// Light mode
body:not(.theme-dark),
body.theme-dark .theme-light__forced,
body.theme-system .theme-light__forced {
    .generate-colors(light);
}

// Dark mode
body.theme-dark,
body:not(.theme-dark) .theme-dark__forced {
    .generate-colors(dark);
}
body.theme-system {
    @media (prefers-color-scheme: dark) {
        .generate-colors(dark);
    }
}

// High contrast mode (light)
body.theme-highcontrast:not(.theme-dark),
body.theme-dark.theme-highcontrast .theme-light__forced,
body.theme-system.theme-highcontrast .theme-light__forced {
    .generate-colors(light, true);
}

// High contrast mode (dark)
body.theme-dark.theme-highcontrast,
body.theme-highcontrast:not(.theme-dark) .theme-dark__forced {
    .generate-colors(dark, true);
}
body.theme-system.theme-highcontrast {
    @media (prefers-color-scheme: dark) {
        .generate-colors(dark, true);
    }
}
