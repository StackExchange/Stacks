@import (reference) "./color-sets.less";
@import (reference) "./color-mixins.less";

:root {
    // deconstruct the default colors in less
    // this keeps the hsl/rgb variables below in sync
    // consumers will need to set each variable separately // TODO verify this last part
    .create-custom-theme-hsl-rgb-variables(@theme-light-default[primary], primary);
    .create-custom-theme-hsl-rgb-variables(@theme-light-default[secondary], secondary);
}

// generated atomic color classes
body {
    .create-colors(@sets-light, length(@sets-light));
    .create-colors(@sets-light, length(@sets-light), classes);
    .create-theme(primary);
    .create-theme(secondary);
    // Set default values for the theme
    .create-colors(@sets-theme-default, length(@sets-theme-default), variables, false);
}

// Light mode
body:not(.theme-dark),
body.theme-dark .theme-light__forced,
body.theme-system .theme-light__forced {
    .create-colors(@sets-light, length(@sets-light));

    &,
    & .themed {
        color: var(--theme-body-font-color-new); // TODO define variable
        .create-theme-hsl-rgb-variables(theme-light);
        .create-colors(@sets-light, length(@sets-light));
        &:extend(.theme-variables);
    }
}

// Dark mode
body.theme-dark,
body:not(.theme-dark) .theme-dark__forced {
    .create-colors(@sets-dark, length(@sets-dark));

    &,
    & .themed {
        color: var(--theme-body-font-color-new); // TODO define variable
        .generate-themed-variables(theme-dark);
        .create-colors(@sets-dark, length(@sets-dark));
        &:extend(.theme-variables);
    }
}
// body.theme-system {
//     @media (prefers-color-scheme: dark) {
//         .theme-dark-rules();
//     }
// }

// High contrast mode (light)
body.theme-highcontrast:not(.theme-dark),
body.theme-dark.theme-highcontrast .theme-light__forced,
body.theme-system.theme-highcontrast .theme-light__forced {
    .create-colors(@sets-hc, length(@sets-hc));
}

// High contrast mode (dark)
body.theme-dark.theme-highcontrast,
body.theme-highcontrast:not(.theme-dark) .theme-dark__forced {
    .create-colors(@sets-hc-dark, length(@sets-hc-dark));
}
body.theme-system.theme-highcontrast {
    @media (prefers-color-scheme: dark) {
        .create-colors(@sets-hc-dark, length(@sets-hc-dark));
    }
}
