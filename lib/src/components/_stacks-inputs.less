//
//  STACK OVERFLOW
//  INPUTS
//
//  This CSS comes from Stacks, our CSS & Pattern library for rapidly building
//  Stack Overflow. For documentation of all these classes and how to contribute,
//  visit https://stackoverflow.design/
//
//  TABLE OF CONTENTS
//  • UNIVERSAL PROPERTIES
//    - Layout
//    - Font Styles
//  • Inputs
//    - Base Style
//    - Interaction States
//    - Textareas
//    - Select Menus
//    - File Upload
//    - Checkboxes & Radios
//  • LABELS
//    - Base Style
//    - Style Modifications
//    - Status Flag
//  • TYPE STYLES
//  • LABELS
//
//  ============================================================================
//  $  BASE STYLE
//  ----------------------------------------------------------------------------
.s-input {
    width: 100%;
    margin: 0;
    padding: 0.8em 1em;
    border: 1px solid @black-200;
    border-radius: @br-sm;
    background-color: @white;
    box-shadow: inset 0 0 1px fade(@black-350, 20%), 0 0 0 fade(@white, 0%);
    font-family: @ff-sans;
    font-size: inherit;
    line-height: 1;

    //  --  PLACEHOLDER
    //  ------------------------------------------------------------------------
    &::-webkit-input-placeholder {
        color: @black-200;
    }
    &::-moz-placeholder { // FF 18+
        opacity: 1;
        color: @black-200;
    }
    &:-ms-input-placeholder { // IE
        color: @black-200;
    }
    &::-ms-input-placeholder { // Edge
        color: @black-200;
    }
    &::placeholder {
        padding-top: 1px; // Placeholder text is 1px higher than text that's entered.
        color: @black-200;
    }
}

.s-input-icon {
    position: absolute;
    top: 50%;
    right: @su8;
    margin-top: -9px;
    vertical-align: text-bottom !important;
    pointer-events: none;
}


//  ============================================================================
//  $   SELECT MENUS
//  ----------------------------------------------------------------------------
.s-select {
    position: relative;

    //  --  MENU ARROWS
    //      To customize the visual appearance of the select menu arrows, we
    //      need to recreate them on the wrapping .select div.
    //  ------------------------------------------------------------------------
    &:before,
    &:after {
        content: "";
        position: absolute;
        right: 13px;
        z-index: @zi-selected;
        border-color: @black-700 transparent;
        border-style: solid;
        border-width: 4px;
        pointer-events: none;
    }
    &:before {
        top: calc(~"50% - 5px");
        border-top-width: 0;
        border-bottom-width: 4px;
    }
    &:after {
        top: calc(~"50% + 1px");
        border-top-width: 4px;
        border-bottom-width: 0;
    }

    //  --  MENU
    //      Now we can style the visual appearance of the select menu;
    //  ------------------------------------------------------------------------
    > select {
        //  [1] Reset the appearance
        .appearance(none);
        width: 100%;
        height: 100%; // Fill the height of its parent

        //  [2] Update the styles
        padding: 0.8em 1em;
        padding-right: @su32;
        border: 1px solid @black-200;
        border-radius: @br-sm;
        outline: 0;
        background-color: @white;
        font-family: @ff-sans;
        font-size: inherit;
        line-height: 1;
    }
}


//  ============================================================================
//  $   CHECKBOXES & RADIOS
//  ----------------------------------------------------------------------------
.s-checkbox,
.s-radio {
    //  [1]   Check to see if we can use custom styles, if so reset the defaults
    //  ------------------------------------------------------------------------
    @supports (appearance: none) or (-webkit-appearance: none) {
        .appearance(none);

        &::-ms-check {
            display: none;
        }

        //  [2]  Now re-style the checkboxes and radios
        //  ------------------------------------------------------------------------
        width: 1em;
        height: 1em;
        border: 1px solid @black-200;
        outline: 0;
        background-color: @white;
        font-size: inherit;
        vertical-align: middle;
        cursor: pointer;

        &:focus {
            outline: 0;
        }
    }
}

//  $$  CHECKBOXES
//  ----------------------------------------------------------------------------
.s-checkbox {
    @supports (appearance: none) or (-webkit-appearance: none) {
        border-radius: @br-sm;
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center center;

        &:checked {
            border-color: @blue-500 !important;
            background-color: @blue-500;
            background-image: url("data:image/svg+xml,%3Csvg width='11' height='11' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 3.41L8.59 2 4 6.59 2.41 5 1 6.41l3 3z' fill='%23fff'/%3E%3C/svg%3E");

            &:focus {
                border-color: @blue-500;
            }
        }

        &:focus {
            border-color: @blue-300;
            box-shadow: 0 0 0 @su4 fade(@blue-500, 15%);
        }
    }
}

//  $$  RADIOS
//  ----------------------------------------------------------------------------
.s-radio {
    @supports (appearance: none) or (-webkit-appearance: none) {
        border-radius: @br-circle;

        &:checked {
            border-color: @blue-500;
            border-width: 0.30769231em;
            background-color: @white;
        }

        &:focus {
            box-shadow: 0 0 0 @su4 fade(@blue-500, 15%);
        }
    }
}


//  ============================================================================
//  $  LABELS
//  ============================================================================
.s-label {
    .mx-fs(@fs-body2);
    font-weight: 700;
    cursor: pointer;
}


//  $$  LABEL STATUS FLAG
//  ----------------------------------------------------------------------------
//      Is this form item required or optional? Flag the status for users.
//      Default styling is optional.
.s-label--status {
    padding: @su2 @su8;
    border-radius: @br-sm;
    background-color: @black-050;
    font-size: @fs-caption;
    font-weight: 400;
    font-style: italic;
    vertical-align: text-bottom;

    &.s-label--status__required {
        background-color: @red-500;
        color: @white;
        font-style: normal;
    }
}


//  ============================================================================
//  $  TEXT STYLES
//  ============================================================================
.s-input-description {
    margin: 0 0 @su8;
    color: @fc-medium;
    line-height: @lh-s;
    .mx-fs(@fs-caption);
}

//  $$  MESSAGE
//      Set some baseline styles
//  ----------------------------------------------------------------------------
.s-input-message {
    margin: @su4 0 0;
    .mx-fs(@fs-caption);
}



//  ============================================================================
//  $   CONNECTED INPUTS
//      To visually connect inputs together
//  ----------------------------------------------------------------------------
.s-input-connect {
    padding: 0.8em 1em;
    line-height: 1;

    //  When we want the gray background
    &.s-input-connect__fill {
        border: 1px solid @black-150;
        border-right-width: 0;
        border-left-width: 0;
        background-color: @bgc-lightest;
        color: @fc-medium;

        &.order-first {
            border-left-width: 1px;
        }
        &.order-last {
            border-right-width: 1px;
        }
    }

    //  No wrapping on labels
    .s-label {
        white-space: nowrap;
    }
}


//  ============================================================================
//  $   STATES
//      The many states for inputs and select menus.
//  ----------------------------------------------------------------------------
.s-input,
.s-select > select {
    //  Focus
    &:focus {
        position: relative;
        border-color: @blue-300;
        outline: 0;
        box-shadow: inset 0 0 4px @black-050, 0 0 0 @su4 fade(@blue-500, 15%);
    }

    //  Disabled, Read-only
    &[disabled],
    &[read-only] {
        border-color: @black-075;
        background-color: @bgc-lightest;
        box-shadow: inset 0 0 2px fade(@black-350, 10%);
        color: @black-200;
    }

    //  Disabled
    &[disabled] {
        cursor: not-allowed;
    }
}


//  $$  VALIDATION STATES
//      Validation states will need applied at the wrapping container level.
//  ============================================================================
//  --  WARNING
.has-warning {
    .s-input,
    .s-checkbox,
    &.s-select > select {
        border-color: @yellow-600;

        &:focus {
            box-shadow: inset 0 0 4px @black-050, 0 0 0 @su4 fade(@yellow-500, 40%);
        }
    }

    .s-input-message,
    .s-input-description {
        color: shade(@yellow-600, 20%);
    }

    .s-input-icon {
        color: @yellow-600;
    }
}

//  --  ERROR
.has-error {
    .s-input,
    .s-checkbox,
    &.s-select > select {
        border-color: @red-400;

        &:focus {
            box-shadow: inset 0 0 4px @black-050, 0 0 0 @su4 fade(@red-200, 40%);
        }
    }

    .s-input-message,
    .s-input-description {
        color: @red-500;
    }

    .s-input-icon {
        color: @red-400;
    }
}

//  --  SUCCESS
.is-success {
    .s-input,
    .s-checkbox,
    &.s-select select {
        border-color: @green-400;

        &:focus {
            box-shadow: inset 0 0 4px @black-050, 0 0 0 @su4 fade(@green-200, 40%);
        }
    }

    .s-input-message,
    .s-input-description {
        color: darken(@green-500, 2%);
    }

    .s-input-icon {
        color: @green-400;
    }
}

//  --  DISABLED
.is-disabled {
    &.s-select:before,
    &.s-select:after {
        border-color: @black-200 transparent;
    }

    .svg-icon {
        color: @black-200;
    }
}

.is-disabled,
.is-success,
.has-error,
.has-warning {
    position: relative;

    .s-input {
        padding-right: @su32;
    }

    &.s-select .s-input-icon {
        right: @su32;
    }
}
